import{d as D,c as u,b as h,a as P,e as w,p as b,f as y,F as k,r as I,t as C,g as d,ao as N,ap as B,k as i,I as v,aY as x}from"./main-Dr4KW1PH.js";const E={class:"flex items-center justify-center gap-2 py-4"},F=["disabled"],L=["onClick"],V={key:1,class:"px-2 text-gray-500"},A=["disabled"],J=D({__name:"Pagination",props:{currentPage:{},totalPages:{}},emits:["update:currentPage"],setup(p,{emit:o}){const g=o;function r(e){g("update:currentPage",e)}return(e,a)=>(d(),u("div",E,[h("button",{class:"flex items-center justify-center h-10 w-10 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:e.currentPage===1,onClick:a[0]||(a[0]=t=>r(e.currentPage-1))},[P(w(N),{class:"w-5 h-5"})],8,F),e.totalPages>0?(d(),u("button",{key:0,class:b(["flex items-center justify-center h-10 min-w-[40px] px-2 rounded text-base transition-colors",e.currentPage===1?"bg-emerald-100 text-emerald-700 font-medium":"bg-gray-200 text-gray-700 hover:bg-gray-300"]),onClick:a[1]||(a[1]=t=>r(1))}," 1 ",2)):y("",!0),(d(!0),u(k,null,I(e.totalPages,t=>(d(),u(k,{key:t},[t!==1&&t!==e.totalPages&&Math.abs(e.currentPage-t)<=2?(d(),u("button",{key:0,class:b(["flex items-center justify-center h-10 min-w-[40px] px-2 rounded text-base transition-colors",t===e.currentPage?"bg-emerald-100 text-emerald-700 font-medium":"bg-gray-200 text-gray-700 hover:bg-gray-300"]),onClick:m=>r(t)},C(t),11,L)):y("",!0)],64))),128)),e.currentPage<e.totalPages-3?(d(),u("span",V,"...")):y("",!0),e.totalPages>1?(d(),u("button",{key:2,class:b(["flex items-center justify-center h-10 min-w-[40px] px-2 rounded text-base transition-colors",e.currentPage===e.totalPages?"bg-emerald-100 text-emerald-700 font-medium":"bg-gray-200 text-gray-700 hover:bg-gray-300"]),onClick:a[2]||(a[2]=t=>r(e.totalPages))},C(e.totalPages),3)):y("",!0),h("button",{class:"flex items-center justify-center h-10 w-10 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:e.currentPage===e.totalPages,onClick:a[3]||(a[3]=t=>r(e.currentPage+1))},[P(w(B),{class:"w-5 h-5"})],8,A)]))}});function O(){const p=i(new Map),o=i([]),g=i(!1),r=i(null),e=i(0),a=i(0),t=i({positive:0,negative:0,neutral:0,keywords:[]}),m=i([]),f=i([]),M=v(()=>e.value),j=v(()=>t.value.positive),$=v(()=>t.value.negative),S=v(()=>t.value.neutral);return o.value=[],{mentions:o,isLoading:g,error:r,totalCount:e,totalPages:a,stats:t,totalMentions:M,positiveMentions:j,negativeMentions:$,neutralMentions:S,fetchMentions:async(c={})=>{const l=JSON.stringify(c),s=p.value.get(l);if(s&&Date.now()-s.timestamp<5*60*1e3){o.value=s.data.results,e.value=s.data.count,a.value=s.data.total_pages,t.value=s.data.stats,m.value=s.data.graph_data,f.value=s.data.stats.keywords;return}g.value=!0,r.value=null;try{console.log("Sending filters to API:",c);const n=await x.get("/posts/",{params:c});console.log("API Response:",n.data),p.value.set(l,{data:n.data,timestamp:Date.now()}),o.value=n.data.results,e.value=n.data.count,a.value=n.data.total_pages,t.value=n.data.stats,m.value=n.data.graph_data,f.value=n.data.stats.keywords}catch(n){r.value="Failed to fetch mentions",console.error("Error fetching mentions:",n)}finally{g.value=!1}},retrySentiment:async c=>{try{const l=await x.post(`/posts/${c}/retry-sentiment/`),s=o.value.findIndex(n=>n.id===c);return s!==-1&&(o.value[s]={...o.value[s],sentiment:l.data.sentiment,sentiment_confidence:l.data.sentiment_confidence}),l.data}catch(l){throw console.error("Error retrying sentiment analysis:",l),l}},graphData:m,availableKeywords:f}}export{J as _,O as u};
//# sourceMappingURL=useMentions-CYyz5hpG.js.map
