import{b6 as n,H as d,aY as o}from"./main-Dr4KW1PH.js";const w=n("tracking",{state:()=>({keywords:[],selectedSites:[],editingId:null,newKeyword:"",filterValue:"all",isLoading:!1,currentPage:1,itemsPerPage:10,totalMentions:0}),getters:{totalKeywords:e=>e.keywords.length,activeKeywords:e=>e.keywords.filter(t=>t.status==="active").length,keywordLimit(){return d().getTierLimits().keywords},filteredKeywords:e=>e.filterValue==="all"?e.keywords:e.keywords.filter(t=>t.status===e.filterValue),totalPages:e=>Math.ceil(e.keywords.length/e.itemsPerPage),paginatedKeywords:e=>{const t=[...e.keywords].sort((a,i)=>i.id-a.id),r=(e.currentPage-1)*e.itemsPerPage,s=r+e.itemsPerPage;return t.slice(r,s)}},actions:{async fetchKeywords(){try{this.isLoading=!0;const e=await o.get("/keywords/");this.keywords=e.data.map(t=>({id:t.id,term:t.term,source:t.source,status:t.is_active?"active":"paused",mentions:t.mentions,trend:"stable",created_at:t.created_at})),this.totalMentions=this.keywords.reduce((t,r)=>t+r.mentions,0)}catch(e){console.error("Failed to fetch keywords:",e)}finally{this.isLoading=!1}},async addKeyword(e,t){if(!(!e.trim()||t.length===0)){if(this.totalKeywords>=this.keywordLimit)throw new Error(`You've reached your keyword limit (${this.totalKeywords}/${this.keywordLimit}). Upgrade to Advanced tier to track up to 50 keywords.`);try{for(const r of t)try{const s=await o.post("/keywords/",{term:e.trim(),source:r,is_active:!0}),a={id:s.data.id,term:s.data.term,source:s.data.source,status:"active",mentions:0,trend:"stable"};this.keywords.push(a),await o.post(`/keywords/${s.data.id}/trigger_scrape/`),await new Promise(i=>setTimeout(i,300))}catch(s){throw s}this.newKeyword="",this.selectedSites=[]}catch(r){throw r}}},async deleteKeyword(e){try{await o.delete(`/keywords/${e}/`),this.keywords=this.keywords.filter(t=>t.id!==e)}catch(t){console.error("Failed to delete keyword:",t)}},async toggleStatus(e){const t=this.keywords.find(r=>r.id===e);if(t)try{await o.patch(`/keywords/${e}/`,{is_active:t.status!=="active"}),t.status=t.status==="active"?"paused":"active"}catch(r){console.error("Failed to toggle keyword status:",r)}},async updateKeyword(e,t){const r=this.keywords.find(s=>s.id===e);if(r)try{await o.patch(`/keywords/${e}/`,{term:t}),r.term=t}catch(s){console.error("Failed to update keyword:",s)}this.editingId=null},async initialize(){await d().fetchProfile(),await this.fetchKeywords()}}});export{w as u};
//# sourceMappingURL=useTracking-CLC7PZtt.js.map
