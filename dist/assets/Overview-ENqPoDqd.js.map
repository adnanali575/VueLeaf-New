{"version":3,"file":"Overview-ENqPoDqd.js","sources":["../../src/services/brandRating.ts","../../src/views/dashboard/Overview.vue"],"sourcesContent":["import { useAnalyticsStore } from '@/stores/analytics'\nimport type { BrandRatingStatus } from '@/types/analytics'\n\nexport class BrandRatingService {\n  private static readonly CACHE_PREFIX = 'brand_rating_'\n  private static readonly CACHE_DURATION = 30 * 60 * 1000 // 30 minutes\n\n  constructor(private analyticsStore = useAnalyticsStore()) {}\n\n  async calculateRating(keywordId: number): Promise<BrandRatingStatus | null> {\n    try {\n      // First check if we already have a valid rating for this keyword\n      const currentRating = this.analyticsStore.brandRating\n      if (currentRating?.id === keywordId) {\n        return {\n          status: 'completed',\n          result: currentRating\n        }\n      }\n\n      // Then check cache for this specific keyword\n      const cached = this.getCachedRating(keywordId)\n      if (cached?.result?.id === keywordId) {\n        return cached\n      }\n\n      // Check current calculation status before starting new one\n      const currentStatus = await this.analyticsStore.fetchBrandRating(keywordId)\n      if (currentStatus) {\n        return currentStatus\n      }\n\n      // Only start new calculation if no existing calculation is in progress\n      const status = await this.analyticsStore.calculateBrandRating(keywordId)\n      \n      if (status?.status === 'completed' && status.result?.id === keywordId) {\n        this.cacheRating(status, keywordId)\n      }\n\n      return status\n    } catch (error) {\n      console.error('Failed to calculate brand rating:', error)\n      return null\n    }\n  }\n\n  private getCachedRating(keywordId: number): BrandRatingStatus | null {\n    const cacheKey = `${BrandRatingService.CACHE_PREFIX}${keywordId}`\n    const cached = localStorage.getItem(cacheKey)\n    if (!cached) return null\n\n    try {\n      const { data, timestamp } = JSON.parse(cached)\n      const isExpired = Date.now() - timestamp > BrandRatingService.CACHE_DURATION\n      \n      // Validate cache has correct keywordId\n      if (isExpired || !data?.result?.id || data.result.id !== keywordId) {\n        localStorage.removeItem(cacheKey)\n        return null\n      }\n      \n      return data\n    } catch (error) {\n      localStorage.removeItem(cacheKey)\n      return null\n    }\n  }\n\n  private cacheRating(data: BrandRatingStatus, keywordId: number): void {\n    if (!data?.result?.id || data.result.id !== keywordId) return\n\n    const cacheKey = `${BrandRatingService.CACHE_PREFIX}${keywordId}`\n    localStorage.setItem(\n      cacheKey,\n      JSON.stringify({\n        data,\n        timestamp: Date.now()\n      })\n    )\n  }\n}","<script setup lang=\"ts\">\r\n// 1. Vue imports\r\nimport { ref, onMounted, computed, watch, onBeforeUnmount } from 'vue'\r\n\r\n// 2. Component imports\r\nimport {\r\n  AlertTriangle,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  ArrowRight,\r\n  MessageCircle,\r\n  Star,\r\n  Loader2,\r\n  History,\r\n  Activity,\r\n  BarChart2,\r\n  Award\r\n} from 'lucide-vue-next'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\n\r\n// 3. Asset imports\r\nimport analyticsImage from '@/assets/images/analytics/analytics-green.png'\r\n\r\n// 4. Service imports\r\nimport { BrandRatingService } from '@/services/brandRating'\r\n\r\n// 5. Store imports\r\nimport { useAnalyticsStore } from '@/stores/analytics'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport { useTracking } from '@/views/dashboard/tracking/composables/useTracking'\r\n\r\n// 6. Type imports\r\nimport type { KeywordDataPoint } from '@/types/analytics'\r\n\r\n// 7. State management\r\ninterface PollState {\r\n  intervalId: ReturnType<typeof setInterval> | null\r\n  startTime: number\r\n}\r\n\r\nconst analyticsStore = useAnalyticsStore()\r\nconst authStore = useAuthStore()\r\nconst trackingStore = useTracking()\r\nconst brandRatingService = new BrandRatingService()\r\n\r\nconst pollState = ref<PollState>({\r\n  intervalId: null,\r\n  startTime: 0\r\n})\r\n\r\n// 8. Computed properties\r\nconst isCalculating = computed(() => analyticsStore.brandRatingStatus === 'calculating')\r\nconst isLoading = computed(() => analyticsStore.brandRatingStatus === 'loading')\r\nconst hasError = computed(() => analyticsStore.brandRatingStatus === 'error')\r\nconst reputationScore = computed(() => analyticsStore.brandRating?.total_score || 0)\r\n\r\n// Format date range for display\r\nconst dateRangeDisplay = computed(() => {\r\n  const start = analyticsStore.filters.dateRange.start\r\n  const end = analyticsStore.filters.dateRange.end\r\n  return `${start.toLocaleDateString('en-US', {\r\n    month: 'short',\r\n    day: 'numeric'\r\n  })} - ${end.toLocaleDateString('en-US', {\r\n    month: 'short',\r\n    day: 'numeric',\r\n    year: 'numeric'\r\n  })}`\r\n})\r\n\r\n// Memoize the sentiment totals\r\nconst sentimentTotals = computed(() => {\r\n  const timeSeriesData = analyticsStore.sentimentOverTime\r\n  if (!timeSeriesData || timeSeriesData.length < 2) return null\r\n\r\n  const latest = timeSeriesData[timeSeriesData.length - 1]\r\n  const oldest = timeSeriesData[0]\r\n\r\n  return {\r\n    latest: {\r\n      total: latest.positive + latest.neutral + latest.negative,\r\n      date: latest.date,\r\n      negative: latest.negative\r\n    },\r\n    oldest: {\r\n      total: oldest.positive + oldest.neutral + oldest.negative,\r\n      date: oldest.date,\r\n      negative: oldest.negative\r\n    }\r\n  }\r\n})\r\n\r\n// Pre-calculate percentages once\r\nconst sentimentPercentages = computed(() => {\r\n  const totals = sentimentTotals.value\r\n  if (!totals) return null\r\n\r\n  return {\r\n    latest: totals.latest.total > 0\r\n      ? (totals.latest.negative / totals.latest.total) * 100\r\n      : 0,\r\n    oldest: totals.oldest.total > 0\r\n      ? (totals.oldest.negative / totals.oldest.total) * 100\r\n      : 0,\r\n    dates: {\r\n      latest: totals.latest.date,\r\n      oldest: totals.oldest.date\r\n    }\r\n  }\r\n})\r\n\r\n// Use pre-calculated percentages\r\nconst sentimentChange = computed(() => {\r\n  const percentages = sentimentPercentages.value\r\n  if (!percentages) return null\r\n\r\n  const change = percentages.latest - percentages.oldest\r\n\r\n  return {\r\n    value: Math.abs(Math.round(change)),\r\n    direction: change > 0 ? 'increased' : 'decreased',\r\n    latest: percentages.dates.latest,\r\n    oldest: percentages.dates.oldest\r\n  }\r\n})\r\n\r\n// 9. Methods\r\nasync function startRatingCalculation(keywordId: number) {\r\n  // Only start calculation if we don't have a current rating\r\n  if (!analyticsStore.brandRating) {\r\n    const status = await brandRatingService.calculateRating(keywordId)\r\n\r\n    if (status?.status === 'calculating') {\r\n      startPolling(keywordId)\r\n    }\r\n  }\r\n}\r\n\r\nfunction startPolling(keywordId: number) {\r\n  // Clear any existing poll\r\n  stopPolling()\r\n\r\n  pollState.value.startTime = Date.now()\r\n  pollState.value.intervalId = setInterval(async () => {\r\n    // Check max duration (3 minutes)\r\n    if (Date.now() - pollState.value.startTime > 180000) {\r\n      stopPolling()\r\n      return\r\n    }\r\n\r\n    const status = await analyticsStore.fetchBrandRating(keywordId)\r\n    if (status?.status === 'completed') {\r\n      stopPolling()\r\n    }\r\n  }, 2000)\r\n}\r\n\r\nfunction stopPolling() {\r\n  if (pollState.value.intervalId) {\r\n    clearInterval(pollState.value.intervalId)\r\n    pollState.value.intervalId = null\r\n  }\r\n}\r\n\r\n// 10. Watchers\r\nwatch(() => analyticsStore.keywordAnalysis, async (keywords) => {\r\n  if (!keywords.length || !keywords[0]?.id) return\r\n\r\n  // Always check rating when keywords change or if current rating doesn't match keyword\r\n  if (!analyticsStore.brandRating || analyticsStore.brandRating.id !== keywords[0].id) {\r\n    await startRatingCalculation(keywords[0].id)\r\n  }\r\n}, { immediate: true })\r\n\r\n// 11. Lifecycle hooks\r\nonMounted(async () => {\r\n  await analyticsStore.fetchAnalyticsData()\r\n  await trackingStore.initialize()\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  stopPolling()\r\n})\r\n\r\nconst getSentimentColor = (sentiment: 'positive' | 'neutral' | 'negative'): string => {\r\n  switch (sentiment) {\r\n    case 'positive': return 'bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300'\r\n    case 'neutral': return 'bg-gradient-to-r from-amber-500/10 to-amber-500/5 text-amber-700 hover:from-amber-500/20 hover:to-amber-500/15 transition-colors duration-300'\r\n    case 'negative': return 'bg-gradient-to-r from-rose-500/10 to-rose-500/5 text-rose-700 hover:from-rose-500/20 hover:to-rose-500/15 transition-colors duration-300'\r\n  }\r\n}\r\n\r\nconst getTrendIcon = (trend: 'up' | 'down' | 'stable') => {\r\n  switch (trend) {\r\n    case 'up': return TrendingUp\r\n    case 'down': return TrendingDown\r\n    case 'stable': return ArrowRight\r\n  }\r\n}\r\n\r\n// Calculate dominant sentiment for a keyword using ratios and relative thresholds\r\nconst getDominantSentiment = (keyword: KeywordDataPoint): 'positive' | 'neutral' | 'negative' => {\r\n  const { positive, negative, mentions } = keyword\r\n\r\n  // Calculate ratios\r\n  const positiveRatio = positive / mentions\r\n  const negativeRatio = negative / mentions\r\n\r\n  // Use lower thresholds based on observed data distribution\r\n  const POSITIVE_THRESHOLD = 0.20  // 20% threshold for positive\r\n  const NEGATIVE_THRESHOLD = 0.10  // 10% threshold for negative\r\n\r\n  // Determine dominant sentiment using relative comparison\r\n  if (positiveRatio >= POSITIVE_THRESHOLD && positiveRatio > negativeRatio) {\r\n    return 'positive'\r\n  }\r\n  if (negativeRatio >= NEGATIVE_THRESHOLD && negativeRatio > positiveRatio) {\r\n    return 'negative'\r\n  }\r\n\r\n  return 'neutral'\r\n}\r\n\r\n// Calculate trend based on percentage of max mentions\r\nconst getKeywordTrend = (keyword: KeywordDataPoint): 'up' | 'down' | 'stable' => {\r\n  const allKeywords = analyticsStore.keywordAnalysis\r\n  if (!allKeywords || allKeywords.length === 0) return 'stable'\r\n\r\n  // Find the highest mention count\r\n  const maxMentions = Math.max(...allKeywords.map(k => k.mentions))\r\n\r\n  // Calculate percentage of max mentions\r\n  const percentage = (keyword.mentions / maxMentions) * 100\r\n\r\n  // Define thresholds as percentages of max mentions\r\n  if (percentage >= 70) return 'up'        // Above 70% of max = up trend\r\n  if (percentage <= 25) return 'down'      // Below 25% of max = down trend\r\n  return 'stable'                          // Between 25-70% = stable\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex-1 md:p-6 p-2\">\r\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <!-- Welcome Section -->\r\n      <div class=\"mb-8 bg-white rounded-lg shadow-sm p-4 sm:p-6 md:p-8\">\r\n        <div class=\"flex flex-col md:flex-row items-center gap-6\">\r\n          <!-- Text Content -->\r\n          <div class=\"flex-1 text-center md:text-start\">\r\n            <h1 class=\"text-lg sm:text-xl md:text-2xl font-medium text-green-800 mb-2 text-center md:text-left\">\r\n              Hey {{ authStore.username }}\r\n            </h1>\r\n            <p class=\"text-gray-600 text-sm sm:text-md md:text-lg leading-relaxed\">\r\n              Welcome to your dashboard! Get ready to dive into your brand's impact and presence across the growing\r\n              community.\r\n              We've gathered insights from top cannabis platforms to show you what people are saying about your brand.\r\n              Explore\r\n              your sentiment trends, engagement stats, and opportunities to strengthen your reputation. Every insight\r\n              here is\r\n              designed to help you connect with your audience and grow your brand's story. Ready to see what's driving\r\n              the buzz?\r\n              Let's get started!\r\n            </p>\r\n          </div>\r\n\r\n          <!-- Image -->\r\n          <div class=\"w-full max-w-xs sm:max-w-sm md:w-48 md:h-48 flex-shrink-0 relative\">\r\n            <img :src=\"analyticsImage\" alt=\"Dashboard illustration\" class=\"w-full h-full object-contain\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- Brand Overview -->\r\n      <div class=\"mb-8\">\r\n        <!-- Brand Overview Card -->\r\n        <Card class=\"border-0 bg-white mb-4\">\r\n          <div class=\"p-6 flex flex-col md:flex-row items-center justify-between gap-4\">\r\n            <h2 class=\"text-md md:text-lg font-medium text-gray-700\">Brand Overview</h2>\r\n            <div class=\"bg-gray-100 text-sm font-medium text-gray-600 px-3 py-1 rounded-full\">\r\n              {{ dateRangeDisplay }}\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        <!-- Responsive Grid Container -->\r\n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <!-- Sentiment Card -->\r\n          <Card\r\n            class=\"shadow-sm hover:shadow-md transition-all duration-200 border border-blue-500/10 bg-gradient-to-br from-blue-100/60 to-indigo-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-blue-700\">Overall Sentiment</p>\r\n                <TrendingUp class=\"h-4 w-4 text-blue-700\" />\r\n              </div>\r\n              <div v-if=\"analyticsStore.scraperStatus\" class=\"flex items-baseline gap-2\">\r\n                <span class=\"text-3xl font-bold text-blue-700\">{{ analyticsStore.overallStats?.positiveSentiment\r\n                }}%</span>\r\n                <span class=\"text-sm font-medium text-blue-700\">Positive</span>\r\n              </div>\r\n              <div v-else class=\"text-3xl font-bold text-blue-700 animate-pulse\">Loading...</div>\r\n              <p class=\"mt-2 text-sm text-blue-700/80\">Based on all mentions</p>\r\n            </div>\r\n          </Card>\r\n\r\n          <!-- Total Mentions Card -->\r\n          <Card\r\n            class=\"shadow-sm hover:shadow-md transition-all duration-200 border border-teal-500/10 bg-gradient-to-br from-cyan-100/60 to-teal-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-teal-700\">Total Mentions</p>\r\n                <MessageCircle class=\"h-4 w-4 text-teal-700\" />\r\n              </div>\r\n              <div class=\"flex items-baseline gap-2\">\r\n                <span class=\"text-3xl font-bold text-teal-700\">{{\r\n                  analyticsStore.overallStats?.totalMentions.toLocaleString() }}</span>\r\n              </div>\r\n              <p class=\"mt-2 text-sm text-teal-700/80\">Across all platforms</p>\r\n            </div>\r\n          </Card>\r\n\r\n          <!-- Active Keywords Card -->\r\n          <Card\r\n            class=\"shadow-sm hover:shadow-md transition-all duration-200 border border-yellow-500/10 bg-gradient-to-br from-yellow-100/60 to-orange-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-yellow-700\">Active Keywords</p>\r\n                <Star class=\"h-4 w-4 text-yellow-700\" />\r\n              </div>\r\n              <div class=\"flex items-baseline gap-2\">\r\n                <span class=\"text-3xl font-bold text-yellow-700\">{{ trackingStore.activeKeywords }}</span>\r\n              </div>\r\n              <p class=\"mt-2 text-sm text-yellow-700/80\">Being tracked</p>\r\n            </div>\r\n          </Card>\r\n\r\n          <!-- Reputation Score Card -->\r\n          <Card\r\n            class=\"shadow-sm hover:shadow-md transition-all duration-200 border border-purple-500/10 bg-gradient-to-br from-purple-100/60 to-fuchsia-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-purple-700\">Reputation Score</p>\r\n                <Award class=\"h-4 w-4 text-purple-700\" />\r\n              </div>\r\n              <div class=\"relative\">\r\n                <div v-if=\"isCalculating || isLoading\"\r\n                  class=\"absolute inset-0 flex items-center justify-center bg-purple-100/75\">\r\n                  <Loader2 class=\"h-6 w-6 text-purple-700 animate-spin\" />\r\n                </div>\r\n                <div v-else-if=\"hasError\" class=\"text-red-700 text-sm\">Failed to load score</div>\r\n                <template v-else>\r\n                  <div class=\"flex items-baseline gap-2\">\r\n                    <span class=\"text-3xl font-bold text-purple-700\">{{ Math.round(reputationScore) }}</span>\r\n                    <span class=\"text-sm font-medium text-purple-700\">/100</span>\r\n                  </div>\r\n                  <div class=\"mt-2 h-2 w-full rounded-full bg-purple-200\">\r\n                    <div class=\"h-2 rounded-full bg-purple-700\" :style=\"{ width: `${reputationScore}%` }\" />\r\n                  </div>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- Loading State - Skeleton -->\r\n      <div v-if=\"analyticsStore.isLoading\" class=\"mb-8 rounded-lg p-6 animate-pulse\" :class=\"{\r\n        'bg-emerald-50 border border-emerald-200': sentimentChange?.direction === 'decreased',\r\n        'bg-yellow-50 border border-yellow-200': !sentimentChange || sentimentChange.direction === 'increased'\r\n      }\">\r\n        <div class=\"flex space-x-4\">\r\n          <div class=\"w-12 h-12 rounded-full\" :class=\"{\r\n            'bg-emerald-200/70': sentimentChange?.direction === 'decreased',\r\n            'bg-yellow-200/70': !sentimentChange || sentimentChange.direction === 'increased'\r\n          }\"></div>\r\n          <div class=\"flex-1 space-y-4 py-1\">\r\n            <div class=\"h-4 rounded w-3/4\" :class=\"{\r\n              'bg-emerald-200/70': sentimentChange?.direction === 'decreased',\r\n              'bg-yellow-200/70': !sentimentChange || sentimentChange.direction === 'increased'\r\n            }\"></div>\r\n            <div class=\"space-y-2\">\r\n              <div class=\"h-4 rounded\" :class=\"{\r\n                'bg-emerald-200/70': sentimentChange?.direction === 'decreased',\r\n                'bg-yellow-200/70': !sentimentChange || sentimentChange.direction === 'increased'\r\n              }\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Error State -->\r\n      <Alert v-else-if=\"analyticsStore.error\"\r\n        class=\"mb-8 bg-red-50 border border-red-200 text-red-800 rounded-lg flex items-center gap-3\">\r\n        <div\r\n          class=\"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-red-100/60 to-rose-100/60 border border-red-500/10\">\r\n          <AlertTriangle class=\"h-5 w-10 text-red-700\" />\r\n        </div>\r\n        <div class=\"flex flex-col\">\r\n          <AlertTitle class=\"text-red-800 font-semibold text-sm sm:text-md\">Error Loading Data</AlertTitle>\r\n          <AlertDescription class=\"text-red-700 text-sm sm:text-md text-start\">\r\n            Unable to load sentiment data. Please try again later.\r\n          </AlertDescription>\r\n        </div>\r\n      </Alert>\r\n\r\n      <!-- Sentiment Alert -->\r\n      <!-- <Card class=\"mb-8 bg-white shadow-sm hover:shadow-md transition-shadow duration-200\"> -->\r\n      <Alert v-else-if=\"sentimentChange\"\r\n        :variant=\"sentimentChange.direction === 'increased' ? 'destructive' : 'default'\" :class=\"{\r\n          'mb-8 shadow-sm hover:shadow-md transition-all duration-200 border border-yellow-500/10 bg-gradient-to-br from-yellow-50/60 to-amber-50/60 rounded-lg flex items-center gap-3': sentimentChange.direction === 'increased',\r\n          'mb-8 shadow-sm hover:shadow-md transition-all duration-200 border border-emerald-500/10 bg-gradient-to-br from-emerald-50/60 to-green-50/60 rounded-lg flex items-center gap-3': sentimentChange.direction === 'decreased'\r\n        }\">\r\n        <div class=\"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-amber-100/60 to-yellow-100/60 border border-amber-500/10\" :class=\"sentimentChange.direction === 'increased'\r\n          ? 'bg-gradient-to-br from-yellow-100/60 to-amber-100/60 border border-yellow-500/10'\r\n          : 'bg-gradient-to-br from-emerald-100/60 to-green-100/60 border border-emerald-500/10'\">\r\n          <component :is=\"sentimentChange.direction === 'increased' ? AlertTriangle : TrendingUp\" :class=\"[\r\n            'h-5 md:w-5 w-10 text-amber-600',\r\n            sentimentChange.direction === 'increased' ? 'text-yellow-800' : 'text-green-800'\r\n          ]\" />\r\n        </div>\r\n        <div class=\"flex flex-col\">\r\n          <AlertTitle class=\"font-semibold text-sm sm:text-md\" :class=\"{\r\n            'text-yellow-600': sentimentChange.direction === 'increased',\r\n            'text-emerald-600': sentimentChange.direction === 'decreased'\r\n          }\">\r\n            {{ sentimentChange.direction === 'increased' ? 'Attention Required' : 'Sentiment Improving' }}\r\n          </AlertTitle>\r\n          <AlertDescription :class=\"{\r\n            'text-yellow-600/80 text-sm sm:text-md -mt-1': sentimentChange.direction === 'increased',\r\n            'text-emerald-600/80 text-sm sm:text-md -mt-1': sentimentChange.direction === 'decreased'\r\n          }\">\r\n            Negative sentiment {{ sentimentChange.direction }} by {{ sentimentChange.value }}% in the last 7 days.\r\n            <router-link to=\"/dashboard/analytics\" class=\"font-medium underline\" :class=\"{\r\n              'hover:text-yellow-700': sentimentChange.direction === 'increased',\r\n              'hover:text-emerald-700': sentimentChange.direction === 'decreased'\r\n            }\">\r\n              View details\r\n            </router-link>\r\n          </AlertDescription>\r\n        </div>\r\n      </Alert>\r\n    <!-- </Card> -->\r\n\r\n      <!-- No Significant Change -->\r\n      <!-- <Card class=\"mb-8 bg-white shadow-sm hover:shadow-md transition-shadow duration-200\"> -->\r\n      <Alert v-else\r\n        class=\"mb-8 shadow-sm hover:shadow-md transition-all duration-200 border border-amber-500/10 bg-gradient-to-br from-amber-50/60 to-yellow-50/60 rounded-lg flex items-center gap-3\">\r\n        <div\r\n          class=\"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-amber-100/60 to-yellow-100/60 border border-amber-500/10\">\r\n          <ArrowRight class=\"h-5 md:w-5 w-10 text-amber-600\" />\r\n        </div>\r\n        <div class=\"flex flex-col\">\r\n          <AlertTitle class=\"text-amber-600 font-semibold text-sm sm:text-md\">Sentiment Stable</AlertTitle>\r\n          <AlertDescription class=\"text-amber-600/80 text-sm sm:text-md -mt-1\">\r\n            No significant sentiment changes in the last 7 days.\r\n            <router-link to=\"/dashboard/analytics\" class=\"font-medium underline hover:text-amber-700\">\r\n              View details\r\n            </router-link>\r\n          </AlertDescription>\r\n        </div>\r\n      </Alert>\r\n    <!-- </Card> -->\r\n\r\n      <!-- Recent Activity -->\r\n      <Card class=\"mb-8 bg-white shadow-sm hover:shadow-md transition-shadow duration-200\">\r\n        <CardHeader>\r\n          <div class=\"flex items-center gap-3\">\r\n            <div class=\"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 w-10 h-10\">\r\n              <Activity class=\"md:w-5 h-5 text-gray-500 w-10\" />\r\n            </div>\r\n            <div class=\"\">\r\n              <CardTitle class=\"md:text-lg font-medium text-gray-700 text-md\">Recent Activity</CardTitle>\r\n              <p class=\"text-sm sm:text-md text-gray-500 \">Latest updates from monitored sources</p>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div class=\"overflow-hidden rounded-lg\">\r\n            <Table class=\"w-full text-sm sm:text-md border-collapse\">\r\n              <TableHeader v-if=\"analyticsStore.posts.length > 0\" class=\"bg-gray-50/50\">\r\n                <TableRow>\r\n                  <TableHead\r\n                    class=\"w-[180px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Source</TableHead>\r\n                  <TableHead\r\n                    class=\"w-[100px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Date</TableHead>\r\n                  <TableHead\r\n                    class=\"w-[120px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Sentiment</TableHead>\r\n                  <TableHead\r\n                    class=\"w-[300px] max-w-[300px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Preview</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody class=\"divide-y divide-gray-200/50\">\r\n                <template v-if=\"analyticsStore.posts.length === 0\">\r\n                  <TableRow >\r\n                    <TableCell colspan=\"4\" class=\"p-0\">\r\n                      <div class=\"flex flex-col items-center justify-center h-64 bg-white rounded-lg p-6 text-center\">\r\n                        <div class=\"w-16 h-16 bg-rose-50 rounded-full flex items-center justify-center mb-6\">\r\n                          <History class=\"w-8 h-8 text-rose-400\" />\r\n                        </div>\r\n                        <h3 class=\"text-lg font-medium text-gray-700 mb-2\">\r\n                          No Recent Activity\r\n                        </h3>\r\n                        <p class=\"text-gray-500 text-sm mb-5 max-w-[700px]\">\r\n                          Activity will appear here once you start tracking keywords and monitoring brand mentions.\r\n                        </p>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <!-- <TableRow class=\"text-sm sm:text-md group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Source</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">02/19/2025</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[300px] max-w-[300px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <div class=\"max-w-full\">\r\n                        <p class=\"text-sm sm:text-md text-gray-600 truncate\">This is a static post content for display\r\n                          purposes.</p>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <TableRow class=\"text-sm sm:text-md group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Source</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">02/19/2025</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[300px] max-w-[300px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <div class=\"max-w-full\">\r\n                        <p class=\"text-sm sm:text-md text-gray-600 truncate\">This is a static post content for display\r\n                          purposes.</p>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <TableRow class=\"text-sm sm:text-md group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Source</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">02/19/2025</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[300px] max-w-[300px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <div class=\"max-w-full\">\r\n                        <p class=\"text-sm sm:text-md text-gray-600 truncate\">This is a static post content for display\r\n                          purposes.</p>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <TableRow class=\"text-sm sm:text-md group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Source</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">02/19/2025</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[300px] max-w-[300px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <div class=\"max-w-full\">\r\n                        <p class=\"text-sm sm:text-md text-gray-600 truncate\">This is a static post content for display\r\n                          purposes.</p>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow> -->\r\n\r\n                </template>\r\n                <template v-else-if=\"analyticsStore.error\">\r\n                  <TableRow>\r\n                    <TableCell colspan=\"4\" class=\"text-center text-red-600 py-4\">\r\n                      Failed to load recent activity\r\n                    </TableCell>\r\n                  </TableRow>\r\n                </template>\r\n                <template v-else>\r\n                  <TableRow v-for=\"post in analyticsStore.posts.slice(0, 5)\" :key=\"post.id\"\r\n                    class=\"text-sm sm:text-md group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">{{ post.source }}</span>\r\n                    </TableCell>\r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">{{ new Date(post.post_date).toLocaleDateString()\r\n                      }}</span>\r\n                    </TableCell>\r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\"\r\n                        :class=\"{\r\n                          'bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300': post.sentiment === 'positive',\r\n                          'bg-gradient-to-r from-rose-500/10 to-rose-500/5 text-rose-700 hover:from-rose-500/20 hover:to-rose-500/15 transition-colors duration-300': post.sentiment === 'negative',\r\n                          'bg-gradient-to-r from-amber-500/10 to-amber-500/5 text-amber-700 hover:from-amber-500/20 hover:to-amber-500/15 transition-colors duration-300': post.sentiment === 'neutral'\r\n                        }\">\r\n                        {{ post.sentiment ? post.sentiment.charAt(0).toUpperCase() + post.sentiment.slice(1) : 'Unknown'\r\n                        }}\r\n                      </span>\r\n                    </TableCell>\r\n                    <TableCell class=\"w-[300px] max-w-[300px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <div class=\"max-w-full\">\r\n                        <p class=\"text-sm sm:text-md text-gray-600 truncate\">{{ post.content }}</p>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                </template>\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <!-- Top Keywords -->\r\n      <Card class=\"bg-white shadow-sm hover:shadow-md transition-shadow duration-200\">\r\n        <CardHeader>\r\n          <div class=\"flex items-center gap-3\">\r\n            <div class=\"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100\">\r\n              <BarChart2 class=\"h-5 md:w-5 w-10 text-gray-500\" />\r\n            </div>\r\n            <div>\r\n              <CardTitle class=\"md:text-lg font-medium text-gray-700 text-md\">Top Keywords</CardTitle>\r\n              <p class=\"text-sm sm:text-md text-gray-500\">Most frequently mentioned terms and phrases</p>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div class=\"overflow-hidden rounded-lg\">\r\n            <Table class=\"w-full text-sm sm:text-md border-collapse\">\r\n              <TableHeader v-if=\"analyticsStore.keywordAnalysis.length > 0\" class=\"bg-gray-50/50\">\r\n                <TableRow>\r\n                  <TableHead\r\n                    class=\"w-[180px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Keyword</TableHead>\r\n                  <TableHead\r\n                    class=\"w-[100px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Mentions</TableHead>\r\n                  <TableHead\r\n                    class=\"w-[120px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Sentiment</TableHead>\r\n                  <TableHead\r\n                    class=\"w-[100px] text-left py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider border-y border-gray-200/50\">\r\n                    Trend</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                <template v-if=\"analyticsStore.keywordAnalysis.length === 0\">\r\n                  <TableRow>\r\n                    <TableCell colspan=\"4\" class=\"p-0\">\r\n                      <div class=\"flex flex-col items-center justify-center h-64 bg-white rounded-lg p-6 text-center\">\r\n                        <div class=\"w-16 h-16 bg-sky-50 rounded-full flex items-center justify-center mb-6\">\r\n                          <TrendingUp class=\"w-8 h-12 text-sky-400\" />\r\n                        </div>\r\n                        <h3 class=\"md:text-lg font-medium text-gray-700 mb-2 text-md\">\r\n                          No Top Keywords Yet\r\n                        </h3>\r\n                        <p class=\"text-gray-500 text-sm mb-5 max-w-[700px]\">\r\n                          Start tracking keywords to see which terms are trending and gaining traction.\r\n                        </p>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <!-- <TableRow class=\"group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Keyword</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">150</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <ArrowUp class=\"h-4 w-4 text-green-500\" />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <TableRow class=\"group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Keyword</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">150</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <ArrowUp class=\"h-4 w-4 text-green-500\" />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <TableRow class=\"group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Keyword</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">150</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <ArrowUp class=\"h-4 w-4 text-green-500\" />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <TableRow class=\"group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Keyword</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">150</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <ArrowUp class=\"h-4 w-4 text-green-500\" />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                  <TableRow class=\"group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    \r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">Static Keyword</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">150</span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\r\n      bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                        Positive\r\n                      </span>\r\n                    </TableCell>\r\n\r\n                    \r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <ArrowUp class=\"h-4 w-4 text-green-500\" />\r\n                    </TableCell>\r\n                  </TableRow> -->\r\n\r\n                </template>\r\n                <template v-else>\r\n                  <TableRow v-for=\"keyword in analyticsStore.keywordAnalysis.slice(0, 5)\" :key=\"keyword.keyword\"\r\n                    class=\"group hover:bg-gray-50/50 transition-all duration-200\">\r\n                    <TableCell class=\"w-[180px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-700\">{{ keyword.keyword }}</span>\r\n                    </TableCell>\r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span class=\"text-sm sm:text-md text-gray-600\">{{ keyword.mentions }}</span>\r\n                    </TableCell>\r\n                    <TableCell class=\"w-[120px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <span\r\n                        class=\"inline-flex items-center justify-center w-20 px-3 py-1 rounded-md text-sm font-medium\"\r\n                        :class=\"getSentimentColor(getDominantSentiment(keyword))\">\r\n                        {{ getDominantSentiment(keyword).charAt(0).toUpperCase() +\r\n                          getDominantSentiment(keyword).slice(1) }}\r\n                      </span>\r\n                    </TableCell>\r\n                    <TableCell class=\"w-[100px] py-4 px-6 border-b border-gray-200/50\">\r\n                      <component :is=\"getTrendIcon(getKeywordTrend(keyword))\" class=\"h-4 w-4\" :class=\"{\r\n                        'text-green-500': getKeywordTrend(keyword) === 'up',\r\n                        'text-red-500': getKeywordTrend(keyword) === 'down',\r\n                        'text-yellow-500': getKeywordTrend(keyword) === 'stable'\r\n                      }\" />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                </template>\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"names":["_BrandRatingService","analyticsStore","useAnalyticsStore","keywordId","currentRating","cached","_a","currentStatus","status","_b","error","cacheKey","data","timestamp","__publicField","BrandRatingService","authStore","useAuthStore","trackingStore","useTracking","brandRatingService","pollState","ref","isCalculating","computed","isLoading","hasError","reputationScore","dateRangeDisplay","start","end","sentimentTotals","timeSeriesData","latest","oldest","sentimentPercentages","totals","sentimentChange","percentages","change","startRatingCalculation","startPolling","stopPolling","watch","keywords","onMounted","onBeforeUnmount","getSentimentColor","sentiment","getTrendIcon","trend","TrendingUp","TrendingDown","ArrowRight","getDominantSentiment","keyword","positive","negative","mentions","positiveRatio","negativeRatio","POSITIVE_THRESHOLD","NEGATIVE_THRESHOLD","getKeywordTrend","allKeywords","maxMentions","k","percentage"],"mappings":"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"}