import{u as P,D as le,a as oe,b as re,T as ne,c as ie,d as de,w as ue}from"./index-CcYM-n4X.js";import{f as ce}from"./analytics-green-CyXqBq4X.js";import{d as I,I as w,g as n,c as f,b as e,e as t,a as s,w as o,h as u,b5 as L,S as me,F as j,r as H,p as C,t as x,q as U,v as J,P as A,aG as E,ag as X,an as Z,k,n as M,aV as pe,H as fe,aJ as ge,b0 as ve,b1 as G,b2 as be,b3 as xe,aZ as V,W as q,V as N,aj as K,f as R,b4 as ye,o as Q,m as _e,A as he,J as O,bU as we,b7 as ke}from"./main-Dr4KW1PH.js";import{_ as ee,a as te,b as se,c as D,d as ae}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtniHOwb.js";import{F as $e}from"./filter-lOc3pAsw.js";import{U as Fe}from"./upload-bKZ6ngqV.js";import{M as W}from"./message-square-plus-BC0gGqJo.js";import"./chevron-down-Ddu5A6Pz.js";import"./chevron-up-3cHl54JK.js";import"./check-D3nD-kB1.js";const Se={class:"mb-8 space-y-6"},Ce={class:"bg-white rounded-lg shadow-sm p-6"},Ve={class:"flex flex-col md:flex-row items-center gap-6"},De={class:"w-48 h-48 flex-shrink-0 relative hidden md:block"},Me=["src"],Ie={class:"flex flex-col sm:flex-row justify-between items-center gap-4 bg-white rounded-lg shadow-sm p-4"},Te={class:"flex items-center gap-4 w-full sm:w-auto"},je={class:"relative w-full sm:w-auto"},Pe=I({__name:"FeedbackHeader",setup($){const i=P(),g=w({get:()=>i.filterStatus.value,set:m=>i.setFilterStatus(m)}),d=w({get:()=>i.searchTerm.value,set:m=>i.setSearchTerm(m)});return(m,p)=>(n(),f("div",Se,[e("div",Ce,[e("div",Ve,[p[2]||(p[2]=e("div",{class:"flex-1"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-green-800 mb-2"}," Welcome to the Feedback Center "),e("p",{class:"text-gray-600 text-lg"}," Help us make your brand management experience even better. Share your thoughts, suggestions, or report any issues you encounter while using our platform. Your feedback goes directly to our admin team and helps shape future improvements. ")],-1)),e("div",De,[e("img",{src:t(ce),alt:"Feedback Illustration",class:"w-full h-full object-contain"},null,8,Me)])])]),e("div",Ie,[e("div",Te,[s(t(ae),{modelValue:g.value,"onUpdate:modelValue":p[0]||(p[0]=y=>g.value=y),class:"w-[180px]"},{default:o(()=>[s(t(ee),null,{default:o(()=>[s(t(te),{placeholder:"Filter by status"})]),_:1}),s(t(se),null,{default:o(()=>[s(t(D),{value:"all"},{default:o(()=>p[3]||(p[3]=[u("All Statuses")])),_:1}),s(t(D),{value:"pending"},{default:o(()=>p[4]||(p[4]=[u("Pending")])),_:1}),s(t(D),{value:"reviewed"},{default:o(()=>p[5]||(p[5]=[u("Under Review")])),_:1}),s(t(D),{value:"resolved"},{default:o(()=>p[6]||(p[6]=[u("Resolved")])),_:1})]),_:1})]),_:1},8,["modelValue"]),s(t($e),{class:"h-5 w-5 text-gray-500"})]),e("div",je,[s(t(L),{modelValue:d.value,"onUpdate:modelValue":p[1]||(p[1]=y=>d.value=y),type:"text",placeholder:"Search feedback...",class:"pl-10 pr-4 py-2 w-full sm:w-64"},null,8,["modelValue"]),s(t(me),{class:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})])])]))}}),Re={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},Ue={class:"flex flex-row items-center justify-between pb-2 space-y-0"},ze={class:"pt-2"},Ae=I({__name:"FeedbackStats",setup($){const i=P(),g=w(()=>i.isLoading.value),d=w(()=>i.totalFeedback.value),m=w(()=>i.pendingFeedback.value),p=w(()=>i.resolvedFeedback.value),y=w(()=>[{title:"Total Feedback",value:d.value,icon:E,bgClass:"border border-blue-500/10 bg-gradient-to-br from-blue-100/60 to-indigo-100/60",iconClass:"text-blue-700",titleClass:"text-blue-700",valueClass:"text-blue-700"},{title:"Pending Review",value:m.value,icon:X,bgClass:"border border-amber-500/10 bg-gradient-to-br from-amber-100/60 to-yellow-100/60",iconClass:"text-amber-700",titleClass:"text-amber-700",valueClass:"text-amber-700"},{title:"Resolved",value:p.value,icon:Z,bgClass:"border border-emerald-500/10 bg-gradient-to-br from-emerald-100/60 to-green-100/60",iconClass:"text-emerald-700",titleClass:"text-emerald-700",valueClass:"text-emerald-700"}]);return(_,b)=>(n(),f("div",Re,[(n(!0),f(j,null,H(y.value,l=>(n(),f("div",{key:l.title,class:C(["rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-4 border",l.bgClass])},[e("div",Ue,[e("h3",{class:C(["text-sm font-medium",l.titleClass])},x(l.title),3),(n(),U(J(g.value?t(A):l.icon),{class:C(["h-4 w-4",[l.iconClass,{"animate-spin":g.value}]])},null,8,["class"]))]),e("div",ze,[e("div",{class:C(["text-2xl font-bold",l.valueClass])},x(g.value?"-":l.value),3)])],2))),128))]))}}),Be={key:0},Le={key:1,class:"flex items-center justify-between bg-gray-50 p-2 rounded"},qe={class:"flex items-center space-x-2"},Ne={class:"text-sm"},He=I({__name:"FileUpload",props:{modelValue:{}},emits:["update:modelValue"],setup($,{emit:i}){const g=i,d=k(null),m=l=>{var a;const c=l.target,h=(a=c.files)==null?void 0:a[0];h&&h.size<=5*1024*1024?g("update:modelValue",h):alert("File size must be less than 5MB"),c&&(c.value="")},p=l=>{var h;l.preventDefault();const c=(h=l.dataTransfer)==null?void 0:h.files[0];c&&c.size<=5*1024*1024?g("update:modelValue",c):alert("File size must be less than 5MB")},y=l=>{l.preventDefault()},_=()=>{g("update:modelValue",null)},b=()=>{var l;(l=d.value)==null||l.click()};return(l,c)=>(n(),f("div",{class:"border-2 border-dashed rounded-lg p-6 text-center",onDrop:p,onDragover:y},[l.modelValue?(n(),f("div",Le,[e("div",qe,[c[2]||(c[2]=e("div",{class:"h-8 w-8 bg-gray-200 rounded flex items-center justify-center"},[e("span",{class:"text-xs text-gray-600"},"File")],-1)),e("span",Ne,x(l.modelValue.name),1)]),s(t(M),{variant:"ghost",size:"sm",onClick:_},{default:o(()=>[s(t(pe),{class:"h-4 w-4"})]),_:1})])):(n(),f("div",Be,[s(t(Fe),{class:"h-8 w-8 mx-auto mb-2 text-gray-400"}),c[1]||(c[1]=e("div",{class:"space-y-1"},[e("p",{class:"text-sm text-gray-500"},"Drag and drop or click to upload"),e("p",{class:"text-xs text-gray-400"},"PNG, JPG up to 5MB")],-1)),e("input",{ref_key:"fileInputRef",ref:d,type:"file",class:"hidden",accept:"image/*",onChange:m},null,544),s(t(M),{variant:"outline",class:"mt-4 rounded-md",onClick:b},{default:o(()=>c[0]||(c[0]=[u(" Select File ")])),_:1})]))],32))}}),Ye={class:"mb-8"},Ge={class:"fixed inset-0 overflow-y-auto"},Oe={class:"flex min-h-full items-center justify-center p-4"},We={class:"space-y-6"},Je={class:"space-y-2"},Ee={class:"space-y-2"},Xe={class:"space-y-2"},Ze={class:"space-y-2"},Ke={class:"flex justify-end space-x-4"},Qe=I({__name:"FeedbackForm",setup($){const i=k(!1),g=P(),d=fe(),m=k(""),{isSubmitting:p}=g,y=k(""),_=k(""),b=k(""),l=k(null),c=async()=>{var a,r;if(console.log("=== Feedback Submit Debug ==="),!d.isAuthenticated()){m.value="Please log in to submit feedback";return}if(!y.value||!_.value||!b.value){m.value="Please fill in all required fields";return}const h=[_.value,b.value].join(`

`);console.log("FeedbackForm: Submitting with message:",h),m.value="";try{g.updateFormData({message:h,attachment:l.value||void 0});const v=await g.submitFeedback();console.log("FeedbackForm: Submission successful:",v),i.value=!1,y.value="",_.value="",b.value="",l.value=null}catch(v){console.error("FeedbackForm: Submission failed:",v),((a=v.response)==null?void 0:a.status)===401?(m.value="Your session has expired. Please log in again.",d.logout()):((r=v.response)==null?void 0:r.status)===413?m.value="Attachment is too large. Please choose a smaller file.":m.value=v.message||"Failed to submit feedback. Please try again."}};return(h,a)=>(n(),f("div",Ye,[s(t(M),{class:"bg-green-600 hover:bg-green-700 text-white rounded-md",onClick:a[0]||(a[0]=r=>i.value=!0)},{default:o(()=>[s(t(ge),{class:"h-5 w-5 mr-2"}),a[7]||(a[7]=u(" Submit New Feedback "))]),_:1}),s(t(ye),{appear:"",show:i.value,as:"template"},{default:o(()=>[s(t(ve),{as:"div",onClose:a[6]||(a[6]=r=>i.value=!1),class:"relative z-50"},{default:o(()=>[s(t(G),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:o(()=>a[8]||(a[8]=[e("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),e("div",Ge,[e("div",Oe,[s(t(G),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:o(()=>[s(t(be),{class:"w-full max-w-[600px] bg-white rounded-lg shadow-sm p-6"},{default:o(()=>[s(t(xe),{class:"text-lg font-semibold mb-2"},{default:o(()=>a[9]||(a[9]=[u("Submit Feedback")])),_:1}),a[21]||(a[21]=e("p",{class:"text-gray-600 mb-6"},"Please provide details about your feedback. We appreciate your input!",-1)),e("form",We,[e("div",Je,[s(t(V),{for:"title"},{default:o(()=>a[10]||(a[10]=[u("Title")])),_:1}),s(t(L),{id:"title",modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=r=>y.value=r),placeholder:"Brief description of your feedback",required:""},null,8,["modelValue"])]),e("div",Ee,[s(t(V),{for:"type"},{default:o(()=>a[11]||(a[11]=[u("Type")])),_:1}),s(t(ae),{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=r=>_.value=r),required:""},{default:o(()=>[s(t(ee),null,{default:o(()=>[s(t(te),{placeholder:"Select feedback type"})]),_:1}),s(t(se),null,{default:o(()=>[s(t(D),{value:"bug"},{default:o(()=>a[12]||(a[12]=[u("Bug Report")])),_:1}),s(t(D),{value:"feature"},{default:o(()=>a[13]||(a[13]=[u("Feature Request")])),_:1}),s(t(D),{value:"support"},{default:o(()=>a[14]||(a[14]=[u("Support Request")])),_:1}),s(t(D),{value:"other"},{default:o(()=>a[15]||(a[15]=[u("Other")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),e("div",Xe,[s(t(V),{for:"description"},{default:o(()=>a[16]||(a[16]=[u("Description")])),_:1}),s(t(L),{id:"description",modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=r=>b.value=r),placeholder:"Please provide detailed information...",type:"textarea",class:"min-h-32",required:""},null,8,["modelValue"])]),e("div",Ze,[s(t(V),null,{default:o(()=>a[17]||(a[17]=[u("Screenshot (optional)")])),_:1}),s(He,{modelValue:l.value,"onUpdate:modelValue":a[4]||(a[4]=r=>l.value=r)},null,8,["modelValue"])]),s(t(q),null,{default:o(()=>[s(t(N),null,{default:o(()=>a[18]||(a[18]=[u(" Your feedback will be visible to administrators who will respond as soon as possible. ")])),_:1})]),_:1}),m.value?(n(),U(t(q),{key:0,class:"bg-red-50 border-red-200"},{default:o(()=>[s(t(K),{class:"h-4 w-4 text-red-600"}),s(t(N),{class:"text-red-600"},{default:o(()=>[u(x(m.value),1)]),_:1})]),_:1})):R("",!0),e("div",Ke,[s(t(M),{type:"button",class:"rounded-md bg-red-100 hover:bg-red-200 text-red-600",onClick:a[5]||(a[5]=r=>i.value=!1)},{default:o(()=>a[19]||(a[19]=[u(" Cancel ")])),_:1}),s(t(M),{type:"button",class:"rounded-md bg-green-100 hover:bg-green-200 text-green-600",disabled:t(p)||!y.value||!_.value||!b.value,onClick:c},{default:o(()=>[t(p)?(n(),f(j,{key:0},[s(t(A),{class:"mr-2 h-4 w-4 animate-spin"}),a[20]||(a[20]=u(" Submitting... "))],64)):(n(),f(j,{key:1},[u(" Submit Feedback ")],64))]),_:1},8,["disabled"])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}}),et={class:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-4"},tt={class:"flex justify-between items-start"},st={class:"flex-1"},at={class:"flex items-center gap-2 mb-2"},lt={class:"text-sm font-medium text-gray-500"},ot={class:"text-sm text-gray-500"},rt={class:"text-gray-600 mb-2"},nt={class:"space-y-3"},it={class:"text-sm text-gray-500"},dt={key:0,class:"mt-2"},ut=["href"],ct={class:"capitalize"},mt={class:"mt-4 flex justify-between items-center"},pt={key:0,class:"text-sm text-gray-500"},ft=I({__name:"FeedbackCard",props:{item:{}},setup($){const i=$,g=P(),d=l=>{switch(l){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"reviewed":return"bg-blue-100 text-blue-800 border-blue-300";case"resolved":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},m=l=>{switch(l){case"pending":return X;case"reviewed":return K;case"resolved":return Z;default:return null}},p=l=>{const c=l.split(/\r?\n/)[0].toLowerCase();return c==="bug"||c==="feature"||c==="support"?c:"other"},y=l=>{const c=l.split(/\r?\n\r?\n/);return c.length>1?c[1].trim():""},_=l=>{const c=new Date(l),a=Math.floor((new Date().getTime()-c.getTime())/1e3);if(a<60)return"just now";const r=Math.floor(a/60);if(r<60)return`${r} minute${r===1?"":"s"} ago`;const v=Math.floor(r/60);if(v<24)return`${v} hour${v===1?"":"s"} ago`;const F=Math.floor(v/24);if(F<30)return`${F} day${F===1?"":"s"} ago`;const S=Math.floor(F/30);if(S<12)return`${S} month${S===1?"":"s"} ago`;const T=Math.floor(F/365);return`${T} year${T===1?"":"s"} ago`},b=()=>{g.setSelectedItem(i.item)};return(l,c)=>(n(),f("div",et,[e("div",tt,[e("div",st,[e("div",at,[e("span",lt,x(l.item.user),1),c[0]||(c[0]=e("span",{class:"text-sm text-gray-400"},"•",-1)),e("span",ot,x(_(l.item.created_at)),1)]),e("div",rt,[e("div",nt,[e("p",it,x(p(l.item.message)),1),e("p",null,x(y(l.item.message)),1)])]),l.item.attachment?(n(),f("div",dt,[e("a",{href:l.item.attachment,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1"}," View Attachment ",8,ut)])):R("",!0)]),e("div",{class:C(["px-2 py-1 rounded-md border flex items-center space-x-1",d(l.item.status)])},[(n(),U(J(m(l.item.status)),{class:"h-4 w-4"})),e("span",ct,x(l.item.status),1)],2)]),e("div",mt,[l.item.replies.length?(n(),f("div",pt,x(l.item.replies.length)+" "+x(l.item.replies.length===1?"reply":"replies")+" • Last reply "+x(_(l.item.replies[l.item.replies.length-1].created_at)),1)):R("",!0),s(t(M),{variant:"outline",size:"sm",class:"text-xs",onClick:b},{default:o(()=>[s(t(E),{class:"h-4 w-4 mr-1"}),u(" "+x(l.item.replies.length?"View Conversation":"Reply"),1)]),_:1})])]))}}),gt={class:"space-y-4"},vt={key:0,class:"flex justify-center items-center py-8"},bt={key:2,class:"flex flex-col items-center justify-center min-h-[16rem] bg-white rounded-lg border border-gray-100 py-12 px-6 text-center my-8"},xt={class:"relative mb-6"},yt={class:"w-16 h-16 bg-purple-50 rounded-full flex items-center justify-center"},_t=I({__name:"FeedbackList",setup($){const i=P(),g=()=>{i.resetForm(),i.updateFormData({message:""})},d=w(()=>i.items.value),m=w(()=>i.filteredItems.value),p=w(()=>i.isLoading.value),y=w(()=>i.error.value);return Q(async()=>{await i.fetchUserFeedback()}),(_,b)=>(n(),f("div",gt,[p.value?(n(),f("div",vt,[s(t(A),{class:"h-8 w-8 animate-spin text-green-600"})])):y.value?(n(),U(t(q),{key:1,variant:"destructive"},{default:o(()=>[s(t(N),null,{default:o(()=>[u(x(y.value),1)]),_:1})]),_:1})):d.value.length?(n(!0),f(j,{key:3},H(m.value,l=>(n(),U(ft,{key:l.id,item:l},null,8,["item"]))),128)):(n(),f("div",bt,[e("div",xt,[e("div",yt,[s(t(W),{class:"w-8 h-8 text-purple-400"})]),b[0]||(b[0]=_e('<div class="absolute -right-3 -top-1 w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center"><span class="text-purple-400 text-xs">?</span></div><div class="absolute -left-3 -bottom-1 w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center"><span class="text-purple-400 text-xs">!</span></div><div class="absolute inset-0 w-16 h-16 rounded-full border-2 border-purple-100 animate-pulse"></div>',3))]),b[2]||(b[2]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"}," No Feedback Yet ",-1)),b[3]||(b[3]=e("p",{class:"text-gray-500 text-sm mb-5 max-w-[280px]"}," Share your thoughts and help us improve. Your feedback shapes the future of our platform. ",-1)),e("button",{onClick:g,class:"inline-flex items-center px-4 py-2 bg-purple-100 text-purple-600 rounded-lg hover:bg-purple-200 transition-colors text-sm font-medium"},[s(t(W),{class:"w-4 h-4 mr-2"}),b[1]||(b[1]=u(" Submit Feedback ")),s(t(he),{class:"w-4 h-4 ml-2"})])]))]))}}),ht={key:0,class:"py-6 space-y-6"},wt={class:"space-y-4"},kt={class:"grid grid-cols-4 items-start gap-4"},$t={class:"col-span-3"},Ft={class:"grid grid-cols-4 items-start gap-4"},St={class:"col-span-3 text-gray-900 space-y-1"},Ct={key:0,class:"space-y-3"},Vt={class:"text-sm text-gray-500"},Dt={key:1},Mt={class:"grid grid-cols-4 items-start gap-4"},It={class:"col-span-3 text-gray-900"},Tt={key:0,class:"grid grid-cols-4 items-start gap-4"},jt={class:"col-span-3"},Pt=["href"],Rt={class:"border-t border-gray-100 pt-6 flex flex-col",style:{height:"60vh"}},Ut={key:0,class:"text-center py-4 text-gray-500"},zt={key:1,class:"space-y-4 px-1"},At={class:"flex justify-between items-start mb-2"},Bt={key:0,class:"text-xs ml-2 text-green-600"},Lt={class:"text-sm text-gray-500"},qt={class:"text-gray-700"},Nt={class:"border-t border-gray-100 pt-4 bg-white"},Ht={class:"flex justify-end"},Yt={class:"flex justify-end space-x-4 pt-6 border-t border-gray-100"},Gt=I({__name:"FeedbackDialog",setup($){const i=P(),g=k(null),d=w(()=>i.selectedItem.value),m=k(""),p=k(!1),y=w({get:()=>!!d.value,set:a=>{a||l()}}),_=async()=>{await we(),g.value&&(g.value.scrollTop=g.value.scrollHeight)};O(d,a=>{a&&(m.value="",_())}),O(()=>{var a;return(a=d.value)==null?void 0:a.replies},()=>{_()},{deep:!0});const b=a=>{const r=new Date(a),F=Math.floor((new Date().getTime()-r.getTime())/1e3);if(F<60)return"just now";const S=Math.floor(F/60);if(S<60)return`${S} minute${S===1?"":"s"} ago`;const T=Math.floor(S/60);if(T<24)return`${T} hour${T===1?"":"s"} ago`;const z=Math.floor(T/24);if(z<30)return`${z} day${z===1?"":"s"} ago`;const B=Math.floor(z/30);if(B<12)return`${B} month${B===1?"":"s"} ago`;const Y=Math.floor(z/365);return`${Y} year${Y===1?"":"s"} ago`},l=()=>{i.setSelectedItem(null),m.value=""},c=async()=>{if(!(!d.value||!m.value.trim())){p.value=!0;try{await i.createReply(d.value.id,m.value),m.value=""}catch(a){console.error("Failed to submit reply:",a)}finally{p.value=!1}}},h=a=>{switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(a,r)=>(n(),U(t(de),{open:y.value,"onUpdate:open":r[1]||(r[1]=v=>y.value=v)},{default:o(()=>[s(t(ie),{class:"sm:max-w-[600px] bg-white"},{default:o(()=>[s(t(le),{class:"border-b border-gray-100 pb-4"},{default:o(()=>[s(t(oe),{class:"text-xl text-green-800"},{default:o(()=>r[2]||(r[2]=[u("Feedback Details")])),_:1}),s(t(re),{class:"text-gray-500"},{default:o(()=>r[3]||(r[3]=[u(" View your feedback and conversation with our team. ")])),_:1})]),_:1}),d.value?(n(),f("div",ht,[e("div",wt,[e("div",kt,[s(t(V),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>r[4]||(r[4]=[u("Status")])),_:1}),e("div",$t,[e("span",{class:C(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize",h(d.value.status)])},x(d.value.status),3)])]),e("div",Ft,[s(t(V),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>r[5]||(r[5]=[u("Message")])),_:1}),e("div",St,[d.value.message.includes("Type:")?(n(),f("div",Ct,[e("p",Vt,x(d.value.message.split("Type:")[1].split(`

`)[0].trim()),1),e("p",null,x(d.value.message.split("Description:")[1].replace(/Description: /,"").trim()),1)])):(n(),f("p",Dt,x(d.value.message),1))])]),e("div",Mt,[s(t(V),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>r[6]||(r[6]=[u("Date")])),_:1}),e("div",It,x(b(d.value.created_at)),1)]),d.value.attachment?(n(),f("div",Tt,[s(t(V),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>r[7]||(r[7]=[u("Attachment")])),_:1}),e("div",jt,[e("a",{href:d.value.attachment,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800"}," View Attachment ",8,Pt)])])):R("",!0)]),e("div",Rt,[r[9]||(r[9]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Conversation",-1)),e("div",{class:"flex-1 overflow-y-auto mb-4",ref_key:"messagesContainer",ref:g},[d.value.replies.length?(n(),f("div",zt,[(n(!0),f(j,null,H(d.value.replies,v=>(n(),f("div",{key:v.id,class:C(["p-4 rounded-lg",[v.is_admin?"bg-green-50 border border-green-100":"bg-gray-50 border border-gray-100"]])},[e("div",At,[e("span",{class:C(["font-medium",[v.is_admin?"text-green-700":"text-gray-700"]])},[u(x(v.user)+" ",1),v.is_admin?(n(),f("span",Bt,"(Admin)")):R("",!0)],2),e("span",Lt,x(b(v.created_at)),1)]),e("p",qt,x(v.message),1)],2))),128))])):(n(),f("div",Ut," No replies yet. Start the conversation by sending a message. "))],512),e("div",Nt,[s(t(ne),{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=v=>m.value=v),placeholder:"Type your reply...",class:"w-full min-h-[100px] resize-none"},null,8,["modelValue"]),e("div",Ht,[s(t(M),{type:"button",class:"bg-green-600 hover:bg-green-700 text-white",disabled:!m.value.trim()||p.value,onClick:c},{default:o(()=>[p.value?(n(),f(j,{key:0},[s(t(A),{class:"mr-2 h-4 w-4 animate-spin"}),r[8]||(r[8]=u(" Sending... "))],64)):(n(),f(j,{key:1},[u(" Send Reply ")],64))]),_:1},8,["disabled"])])])])])):R("",!0),e("div",Yt,[s(t(M),{variant:"outline",onClick:l},{default:o(()=>r[10]||(r[10]=[u(" Close ")])),_:1})])]),_:1})]),_:1},8,["open"]))}}),Ot={class:"flex-1 p-6"},Wt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ls=I({__name:"FeedbackPage",setup($){const i=P();return Q(async()=>{try{await i.initializeFeedback(!1)}catch(g){console.error("Failed to initialize feedback page:",g)}}),ke(()=>{ue.disconnect()}),(g,d)=>(n(),f("div",Ot,[e("div",Wt,[s(Pe),s(Ae),s(Qe),s(_t),s(Gt)])]))}});export{ls as default};
//# sourceMappingURL=FeedbackPage-BNgcaNWO.js.map
