import{e as G,c as le,D as ie,a as ue,b as de,f as pe,d as ce,u as _e,T as xe,w as we}from"./index-CcYM-n4X.js";import{d as U,k as N,I as M,g as p,c as _,b as g,a as s,w as o,e as n,h as c,aR as fe,n as F,t as w,b5 as ke,S as Me,q as O,v as De,f as q,p as E,an as Se,aG as me,ag as Fe,P as Q,Y as Ce,a1 as Pe,$ as te,a0 as P,a2 as $e,r as ge,a3 as $,F as V,x as Te,J as ae,aZ as W,bU as We,o as Ve,b7 as Ae,m as Ie}from"./main-Dr4KW1PH.js";import{_ as he,a as ve,b as be,c as T,d as ye}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtniHOwb.js";import{F as je}from"./filter-lOc3pAsw.js";import{_ as Le,a as Re}from"./CardContent.vue_vue_type_script_setup_true_lang-DIvyJq6m.js";import{_ as Ne}from"./CardTitle.vue_vue_type_script_setup_true_lang-Np9iXpuv.js";import"./chevron-down-Ddu5A6Pz.js";import"./chevron-up-3cHl54JK.js";import"./check-D3nD-kB1.js";const Oe={class:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-4"},Ue={class:"flex items-center gap-4"},Xe={class:"relative"},ze=U({__name:"FeedbackFilters",setup(t){const a=G(),e=N(!1),r=M({get:()=>a.filterStatus,set:i=>a.setFilterStatus(i)}),l=M({get:()=>a.searchTerm,set:i=>a.setSearchTerm(i)}),h=M(()=>a.isLoading);async function f(){try{await a.clearAllFeedback(),e.value=!1}catch(i){console.error("Failed to clear feedback:",i)}}return(i,d)=>(p(),_("div",Oe,[g("div",Ue,[s(n(ye),{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=b=>r.value=b)},{default:o(()=>[s(n(he),{class:"w-[180px]"},{default:o(()=>[s(n(ve),{placeholder:"Filter by status"})]),_:1}),s(n(be),null,{default:o(()=>[s(n(T),{value:"all"},{default:o(()=>d[5]||(d[5]=[c("All Statuses")])),_:1}),s(n(T),{value:"pending"},{default:o(()=>d[6]||(d[6]=[c("Pending")])),_:1}),s(n(T),{value:"reviewed"},{default:o(()=>d[7]||(d[7]=[c("Under Review")])),_:1}),s(n(T),{value:"resolved"},{default:o(()=>d[8]||(d[8]=[c("Resolved")])),_:1})]),_:1})]),_:1},8,["modelValue"]),s(n(je),{class:"h-5 w-5 text-gray-500"}),s(n(F),{variant:"destructive",class:"gap-2 inline-flex",onClick:d[1]||(d[1]=b=>e.value=!0)},{default:o(()=>[s(n(fe),{class:"h-4 w-4"}),d[9]||(d[9]=c(" Clear All "))]),_:1}),s(n(ce),{open:e.value,"onUpdate:open":d[3]||(d[3]=b=>e.value=b)},{default:o(()=>[s(n(le),{class:"sm:max-w-[425px]"},{default:o(()=>[s(n(ie),null,{default:o(()=>[s(n(ue),null,{default:o(()=>d[10]||(d[10]=[c("Clear All Feedback")])),_:1}),s(n(de),null,{default:o(()=>d[11]||(d[11]=[c(" Are you sure you want to clear all feedback? This action cannot be undone. ")])),_:1})]),_:1}),s(n(pe),null,{default:o(()=>[s(n(F),{variant:"outline",onClick:d[2]||(d[2]=b=>e.value=!1)},{default:o(()=>d[12]||(d[12]=[c(" Cancel ")])),_:1}),s(n(F),{variant:"destructive",disabled:h.value,onClick:f},{default:o(()=>[c(w(h.value?"Clearing...":"Clear All"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),g("div",Xe,[s(n(ke),{modelValue:l.value,"onUpdate:modelValue":d[4]||(d[4]=b=>l.value=b),type:"text",placeholder:"Search feedback...",class:"pl-10 pr-4 py-2 w-full sm:w-64"},null,8,["modelValue"]),s(n(Me),{class:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})])]))}}),Y=43200,ne=1440,se=Symbol.for("constructDateFrom");function K(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&se in t?t[se](a):t instanceof Date?new t.constructor(a):new Date(a)}function C(t,a){return K(t,t)}let Ye={};function qe(){return Ye}function re(t){const a=C(t),e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return e.setUTCFullYear(a.getFullYear()),+t-+e}function Z(t,...a){const e=K.bind(null,t||a.find(r=>typeof r=="object"));return a.map(e)}function H(t,a){const e=+C(t)-+C(a);return e<0?-1:e>0?1:e}function He(t){return K(t,Date.now())}function Je(t,a,e){const[r,l]=Z(e==null?void 0:e.in,t,a),h=r.getFullYear()-l.getFullYear(),f=r.getMonth()-l.getMonth();return h*12+f}function Be(t){return a=>{const r=(t?Math[t]:Math.trunc)(a);return r===0?0:r}}function Ee(t,a){return+C(t)-+C(a)}function Qe(t,a){const e=C(t);return e.setHours(23,59,59,999),e}function Ge(t,a){const e=C(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Ke(t,a){const e=C(t);return+Qe(e)==+Ge(e)}function Ze(t,a,e){const[r,l,h]=Z(e==null?void 0:e.in,t,t,a),f=H(l,h),i=Math.abs(Je(l,h));if(i<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-f*i);let d=H(l,h)===-f;Ke(r)&&i===1&&H(r,h)===1&&(d=!1);const b=f*(i-+d);return b===0?0:b}function et(t,a,e){const r=Ee(t,a)/1e3;return Be(e==null?void 0:e.roundingMethod)(r)}const tt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},at=(t,a,e)=>{let r;const l=tt[t];return typeof l=="string"?r=l:a===1?r=l.one:r=l.other.replace("{{count}}",a.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function B(t){return(a={})=>{const e=a.width?String(a.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const nt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},st={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ot={date:B({formats:nt,defaultWidth:"full"}),time:B({formats:st,defaultWidth:"full"}),dateTime:B({formats:rt,defaultWidth:"full"})},lt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},it=(t,a,e,r)=>lt[t];function L(t){return(a,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let l;if(r==="formatting"&&t.formattingValues){const f=t.defaultFormattingWidth||t.defaultWidth,i=e!=null&&e.width?String(e.width):f;l=t.formattingValues[i]||t.formattingValues[f]}else{const f=t.defaultWidth,i=e!=null&&e.width?String(e.width):t.defaultWidth;l=t.values[i]||t.values[f]}const h=t.argumentCallback?t.argumentCallback(a):a;return l[h]}}const ut={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ct={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ft={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ht=(t,a)=>{const e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},vt={ordinalNumber:ht,era:L({values:ut,defaultWidth:"wide"}),quarter:L({values:dt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:L({values:ct,defaultWidth:"wide"}),day:L({values:ft,defaultWidth:"wide"}),dayPeriod:L({values:mt,defaultWidth:"wide",formattingValues:gt,defaultFormattingWidth:"wide"})};function R(t){return(a,e={})=>{const r=e.width,l=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],h=a.match(l);if(!h)return null;const f=h[0],i=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(i)?yt(i,m=>m.test(f)):bt(i,m=>m.test(f));let b;b=t.valueCallback?t.valueCallback(d):d,b=e.valueCallback?e.valueCallback(b):b;const y=a.slice(f.length);return{value:b,rest:y}}}function bt(t,a){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&a(t[e]))return e}function yt(t,a){for(let e=0;e<t.length;e++)if(a(t[e]))return e}function pt(t){return(a,e={})=>{const r=a.match(t.matchPattern);if(!r)return null;const l=r[0],h=a.match(t.parsePattern);if(!h)return null;let f=t.valueCallback?t.valueCallback(h[0]):h[0];f=e.valueCallback?e.valueCallback(f):f;const i=a.slice(l.length);return{value:f,rest:i}}}const _t=/^(\d+)(th|st|nd|rd)?/i,xt=/\d+/i,wt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kt={any:[/^b/i,/^(a|c)/i]},Mt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dt={any:[/1/i,/2/i,/3/i,/4/i]},St={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ft={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ct={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$t={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Wt={ordinalNumber:pt({matchPattern:_t,parsePattern:xt,valueCallback:t=>parseInt(t,10)}),era:R({matchPatterns:wt,defaultMatchWidth:"wide",parsePatterns:kt,defaultParseWidth:"any"}),quarter:R({matchPatterns:Mt,defaultMatchWidth:"wide",parsePatterns:Dt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:R({matchPatterns:St,defaultMatchWidth:"wide",parsePatterns:Ft,defaultParseWidth:"any"}),day:R({matchPatterns:Ct,defaultMatchWidth:"wide",parsePatterns:Pt,defaultParseWidth:"any"}),dayPeriod:R({matchPatterns:$t,defaultMatchWidth:"any",parsePatterns:Tt,defaultParseWidth:"any"})},Vt={code:"en-US",formatDistance:at,formatLong:ot,formatRelative:it,localize:vt,match:Wt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function At(t,a,e){const r=qe(),l=(e==null?void 0:e.locale)??r.locale??Vt,h=2520,f=H(t,a);if(isNaN(f))throw new RangeError("Invalid time value");const i=Object.assign({},e,{addSuffix:e==null?void 0:e.addSuffix,comparison:f}),[d,b]=Z(e==null?void 0:e.in,...f>0?[a,t]:[t,a]),y=et(b,d),m=(re(b)-re(d))/1e3,v=Math.round((y-m)/60);let D;if(v<2)return e!=null&&e.includeSeconds?y<5?l.formatDistance("lessThanXSeconds",5,i):y<10?l.formatDistance("lessThanXSeconds",10,i):y<20?l.formatDistance("lessThanXSeconds",20,i):y<40?l.formatDistance("halfAMinute",0,i):y<60?l.formatDistance("lessThanXMinutes",1,i):l.formatDistance("xMinutes",1,i):v===0?l.formatDistance("lessThanXMinutes",1,i):l.formatDistance("xMinutes",v,i);if(v<45)return l.formatDistance("xMinutes",v,i);if(v<90)return l.formatDistance("aboutXHours",1,i);if(v<ne){const S=Math.round(v/60);return l.formatDistance("aboutXHours",S,i)}else{if(v<h)return l.formatDistance("xDays",1,i);if(v<Y){const S=Math.round(v/ne);return l.formatDistance("xDays",S,i)}else if(v<Y*2)return D=Math.round(v/Y),l.formatDistance("aboutXMonths",D,i)}if(D=Ze(b,d),D<12){const S=Math.round(v/Y);return l.formatDistance("xMonths",S,i)}else{const S=D%12,A=Math.trunc(D/12);return S<3?l.formatDistance("aboutXYears",A,i):S<9?l.formatDistance("overXYears",A,i):l.formatDistance("almostXYears",A+1,i)}}function It(t,a){return At(t,He(t),a)}const jt=U({__name:"StatusBadge",props:{status:{}},setup(t){const a=t,e=M(()=>{switch(a.status){case"pending":return"Pending";case"reviewed":return"Under Review";case"resolved":return"Resolved";default:return a.status}}),r=M(()=>{switch(a.status){case"pending":return Fe;case"reviewed":return me;case"resolved":return Se;default:return null}}),l=M(()=>{switch(a.status){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"reviewed":return"bg-blue-100 text-blue-800 border-blue-300";case"resolved":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}});return(h,f)=>(p(),_("span",{class:E(["inline-flex items-center justify-center px-2 py-1 text-xs font-medium rounded-md border",l.value])},[r.value?(p(),O(De(r.value),{key:0,class:"h-4 w-4 mr-1"})):q("",!0),c(" "+w(e.value),1)],2))}}),Lt={key:0,class:"flex justify-center items-center py-8"},Rt={key:1,class:"text-center py-8 text-red-600"},Nt={key:2,class:"text-center py-8 text-gray-500"},Ot={class:"truncate"},Ut={class:"flex items-center gap-1 text-gray-600"},Xt={class:"flex items-center gap-2"},zt=U({__name:"FeedbackTable",setup(t){const a=G(),e=M(()=>a.filteredItems),r=M(()=>a.isLoading),l=M(()=>a.error),h=y=>{a.setSelectedItem(y)},f=y=>{const m=y.split(/\r?\n/)[0].toLowerCase();return m==="bug"||m==="feature"||m==="support"?m:"other"},i=y=>{const m=y.split(/\r?\n\r?\n/);return m.length>1?m[1].trim():""},d=y=>It(new Date(y),{addSuffix:!0}),b=async y=>{try{console.log("FeedbackTable: Attempting to delete feedback:",y),await a.deleteFeedback(y),console.log("FeedbackTable: Successfully deleted feedback:",y)}catch(m){console.error("FeedbackTable: Error deleting feedback:",m)}};return(y,m)=>(p(),O(n(Te),null,{default:o(()=>[s(n(Le),null,{default:o(()=>[s(n(Ne),null,{default:o(()=>m[0]||(m[0]=[c("Feedback Items")])),_:1})]),_:1}),s(n(Re),null,{default:o(()=>[r.value?(p(),_("div",Lt,[s(n(Q),{class:"h-8 w-8 animate-spin text-green-600"})])):l.value?(p(),_("div",Rt,w(l.value),1)):e.value.length?(p(),O(n(Ce),{key:3},{default:o(()=>[s(n(Pe),null,{default:o(()=>[s(n(te),null,{default:o(()=>[s(n(P),null,{default:o(()=>m[1]||(m[1]=[c("User")])),_:1}),s(n(P),null,{default:o(()=>m[2]||(m[2]=[c("Type")])),_:1}),s(n(P),null,{default:o(()=>m[3]||(m[3]=[c("Message")])),_:1}),s(n(P),null,{default:o(()=>m[4]||(m[4]=[c("Date")])),_:1}),s(n(P),null,{default:o(()=>m[5]||(m[5]=[c("Status")])),_:1}),s(n(P),null,{default:o(()=>m[6]||(m[6]=[c("Replies")])),_:1}),s(n(P),null,{default:o(()=>m[7]||(m[7]=[c("Actions")])),_:1})]),_:1})]),_:1}),s(n($e),null,{default:o(()=>[(p(!0),_(V,null,ge(e.value,v=>(p(),O(n(te),{key:v.id},{default:o(()=>[s(n($),null,{default:o(()=>[c(w(v.user),1)]),_:2},1024),s(n($),null,{default:o(()=>[c(w(f(v.message)),1)]),_:2},1024),s(n($),{class:"max-w-md"},{default:o(()=>[g("p",Ot,w(i(v.message)),1)]),_:2},1024),s(n($),null,{default:o(()=>[c(w(d(v.created_at)),1)]),_:2},1024),s(n($),null,{default:o(()=>[s(jt,{status:v.status},null,8,["status"])]),_:2},1024),s(n($),null,{default:o(()=>[g("div",Ut,[s(n(me),{class:"h-4 w-4"}),g("span",null,w(v.replies.length),1)])]),_:2},1024),s(n($),null,{default:o(()=>[g("div",Xt,[s(n(F),{variant:"outline",size:"sm",class:"inline-flex items-center justify-center px-3 py-1 text-xs font-medium text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-md border border-gray-200 whitespace-nowrap",onClick:D=>h(v)},{default:o(()=>m[8]||(m[8]=[c(" View Details ")])),_:2},1032,["onClick"]),s(n(F),{variant:"outline",size:"sm",class:"inline-flex items-center justify-center px-2 py-1 text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md border border-red-200",onClick:D=>b(v.id)},{default:o(()=>[s(n(fe),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(p(),_("div",Nt," No feedback items found. "))]),_:1})]),_:1}))}}),Yt={key:0,class:"py-6 space-y-6"},qt={class:"space-y-4"},Ht={class:"grid grid-cols-4 items-start gap-4"},Jt={class:"col-span-3 text-gray-900"},Bt={class:"grid grid-cols-4 items-start gap-4"},Et={class:"col-span-3 text-gray-900"},Qt={class:"grid grid-cols-4 items-start gap-4"},Gt={class:"col-span-3 text-gray-900"},Kt={class:"grid grid-cols-4 items-start gap-4"},Zt={class:"col-span-3 text-gray-900"},ea={key:0,class:"grid grid-cols-4 items-start gap-4"},ta={class:"col-span-3"},aa=["href"],na={class:"grid grid-cols-4 items-start gap-4"},sa={class:"col-span-3"},ra={class:"border-t border-gray-100 pt-6 flex flex-col",style:{height:"60vh"}},oa={key:0,class:"text-center py-4 text-gray-500"},la={key:1,class:"space-y-4 px-1"},ia={class:"flex justify-between items-start mb-2"},ua={key:0,class:"text-xs ml-2 text-green-600"},da={class:"text-sm text-gray-500"},ca={class:"text-gray-700"},fa={class:"border-t border-gray-100 pt-4 bg-white"},ma={class:"flex justify-end"},ga={class:"flex justify-end space-x-4 pt-6 border-t border-gray-100"},ha=U({__name:"FeedbackDialog",setup(t){const a=_e(),e=N(null),r=M(()=>a.selectedItem.value),l=M(()=>a.isLoading.value),h=N("pending"),f=N(""),i=N(!1),d=M({get:()=>!!r.value,set:x=>{x||D()}}),b=async()=>{await We(),e.value&&(e.value.scrollTop=e.value.scrollHeight)};ae(r,x=>{x&&(h.value=x.status,f.value="",b())}),ae(()=>{var x;return(x=r.value)==null?void 0:x.replies},()=>{b()},{deep:!0});const y=x=>{const u=x.split(/\r?\n/)[0].toLowerCase();return u==="bug"||u==="feature"||u==="support"?u:"other"},m=x=>{const u=x.split(/\r?\n\r?\n/);return u.length>1?u[1].trim():""},v=x=>{const u=new Date(x),k=Math.floor((new Date().getTime()-u.getTime())/1e3);if(k<60)return"just now";const X=Math.floor(k/60);if(X<60)return`${X} minute${X===1?"":"s"} ago`;const z=Math.floor(X/60);if(z<24)return`${z} hour${z===1?"":"s"} ago`;const j=Math.floor(z/24);if(j<30)return`${j} day${j===1?"":"s"} ago`;const J=Math.floor(j/30);if(J<12)return`${J} month${J===1?"":"s"} ago`;const ee=Math.floor(j/365);return`${ee} year${ee===1?"":"s"} ago`},D=()=>{a.setSelectedItem(null),f.value=""},S=async()=>{r.value&&h.value!==r.value.status&&await a.updateStatus(r.value.id,h.value)},A=async()=>{if(!(!r.value||!f.value.trim())){i.value=!0;try{await a.createReply(r.value.id,f.value),f.value=""}catch(x){console.error("Failed to submit reply:",x)}finally{i.value=!1}}};return(x,u)=>(p(),O(n(ce),{open:d.value,"onUpdate:open":u[2]||(u[2]=I=>d.value=I)},{default:o(()=>[s(n(le),{class:"sm:max-w-[600px] bg-white"},{default:o(()=>{var I;return[s(n(ie),{class:"border-b border-gray-100 pb-4"},{default:o(()=>[s(n(ue),{class:"text-xl text-green-800"},{default:o(()=>u[3]||(u[3]=[c("Feedback Details")])),_:1}),s(n(de),{class:"text-gray-500"},{default:o(()=>u[4]||(u[4]=[c(" View and update the status of this feedback item. ")])),_:1})]),_:1}),r.value?(p(),_("div",Yt,[g("div",qt,[g("div",Ht,[s(n(W),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>u[5]||(u[5]=[c("User")])),_:1}),g("div",Jt,w(r.value.user),1)]),g("div",Bt,[s(n(W),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>u[6]||(u[6]=[c("Type")])),_:1}),g("div",Et,w(y(r.value.message)),1)]),g("div",Qt,[s(n(W),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>u[7]||(u[7]=[c("Message")])),_:1}),g("div",Gt,w(m(r.value.message)),1)]),g("div",Kt,[s(n(W),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>u[8]||(u[8]=[c("Date")])),_:1}),g("div",Zt,w(v(r.value.created_at)),1)]),r.value.attachment?(p(),_("div",ea,[s(n(W),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>u[9]||(u[9]=[c("Attachment")])),_:1}),g("div",ta,[g("a",{href:r.value.attachment,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800"}," View Attachment ",8,aa)])])):q("",!0),g("div",na,[s(n(W),{class:"text-right text-sm font-medium text-gray-600"},{default:o(()=>u[10]||(u[10]=[c("Status")])),_:1}),g("div",sa,[s(n(ye),{modelValue:h.value,"onUpdate:modelValue":u[0]||(u[0]=k=>h.value=k)},{default:o(()=>[s(n(he),{class:"w-[180px]"},{default:o(()=>[s(n(ve),{placeholder:"Select status"})]),_:1}),s(n(be),null,{default:o(()=>[s(n(T),{value:"pending"},{default:o(()=>u[11]||(u[11]=[c("Pending")])),_:1}),s(n(T),{value:"reviewed"},{default:o(()=>u[12]||(u[12]=[c("Under Review")])),_:1}),s(n(T),{value:"resolved"},{default:o(()=>u[13]||(u[13]=[c("Resolved")])),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),g("div",ra,[u[15]||(u[15]=g("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Conversation",-1)),g("div",{class:"flex-1 overflow-y-auto mb-4",ref_key:"messagesContainer",ref:e},[r.value.replies.length?(p(),_("div",la,[(p(!0),_(V,null,ge(r.value.replies,k=>(p(),_("div",{key:k.id,class:E(["p-4 rounded-lg",[k.is_admin?"bg-green-50 border border-green-100":"bg-gray-50 border border-gray-100"]])},[g("div",ia,[g("span",{class:E(["font-medium",[k.is_admin?"text-green-700":"text-gray-700"]])},[c(w(k.user)+" ",1),k.is_admin?(p(),_("span",ua,"(Admin)")):q("",!0)],2),g("span",da,w(v(k.created_at)),1)]),g("p",ca,w(k.message),1)],2))),128))])):(p(),_("div",oa," No replies yet. Start the conversation by sending a message. "))],512),g("div",fa,[s(n(xe),{modelValue:f.value,"onUpdate:modelValue":u[1]||(u[1]=k=>f.value=k),placeholder:"Type your reply...",class:"w-full min-h-[100px] resize-none"},null,8,["modelValue"]),g("div",ma,[s(n(F),{type:"button",class:"bg-green-600 hover:bg-green-700 text-white",disabled:!f.value.trim()||i.value,onClick:A},{default:o(()=>[i.value?(p(),_(V,{key:0},[s(n(Q),{class:"mr-2 h-4 w-4 animate-spin"}),u[14]||(u[14]=c(" Sending... "))],64)):(p(),_(V,{key:1},[c(" Send Reply ")],64))]),_:1},8,["disabled"])])])])])):q("",!0),g("div",ga,[s(n(F),{variant:"outline",onClick:D},{default:o(()=>u[16]||(u[16]=[c(" Close ")])),_:1}),s(n(F),{variant:"default",class:"bg-green-600 hover:bg-green-700 text-white",onClick:S,disabled:!r.value||l.value||h.value===((I=r.value)==null?void 0:I.status)},{default:o(()=>[l.value?(p(),_(V,{key:0},[s(n(Q),{class:"mr-2 h-4 w-4 animate-spin"}),u[17]||(u[17]=c(" Saving... "))],64)):(p(),_(V,{key:1},[c(" Update Status ")],64))]),_:1},8,["disabled"])])]}),_:1})]),_:1},8,["open"]))}}),va={class:"flex-1 p-6"},ba={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ya={class:"mb-8 bg-white rounded-lg shadow-sm"},pa={class:"p-6"},_a={class:"bg-white rounded-lg shadow-sm"},xa={class:"overflow-hidden"},wa=U({__name:"FeedbackPage",setup(t){const a=G();return Ve(async()=>{try{await a.initializeFeedback(!0)}catch(e){console.error("Failed to initialize admin feedback page:",e)}}),Ae(()=>{we.disconnect()}),(e,r)=>(p(),_("div",va,[g("div",ba,[r[1]||(r[1]=Ie('<div class="mb-8 bg-white rounded-lg shadow-sm p-6"><div class="flex flex-col md:flex-row items-center gap-6"><div class="flex-1"><h1 class="text-xl md:text-2xl font-medium text-green-800 mb-2"> Feedback Management </h1><p class="text-gray-600 text-lg"> Review and manage user feedback, bug reports, and feature requests. Update statuses and track feedback trends to improve the user experience. </p></div></div></div>',1)),g("div",ya,[g("div",pa,[r[0]||(r[0]=g("h2",{class:"text-xl font-semibold text-green-800 mb-4"},"Filters",-1)),s(ze)])]),g("div",_a,[g("div",xa,[s(zt)])]),s(ha)])]))}}),ka="admin-feedback",Ma="/admin/feedback",oe={name:ka,path:Ma};typeof oe=="function"&&oe(wa);export{wa as default};
//# sourceMappingURL=FeedbackPage-CElU5Cyq.js.map
