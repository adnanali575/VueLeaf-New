{"version":3,"file":"Mentions-7tZ_PIje.js","sources":["../../src/views/dashboard/mentions/components/MentionsChart.vue","../../src/views/dashboard/Mentions.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\n// Script section remains the same until chartOption\r\nimport { computed } from 'vue'\r\nimport { use } from 'echarts/core'\r\nimport { CanvasRenderer } from 'echarts/renderers'\r\nimport { LineChart } from 'echarts/charts'\r\nimport {\r\n  GridComponent,\r\n  TooltipComponent,\r\n  LegendComponent,\r\n  ToolboxComponent\r\n} from 'echarts/components'\r\nimport VChart from 'vue-echarts'\r\nimport type { LineSeriesOption } from 'echarts/charts'\r\n\r\n// Register ECharts components\r\nuse([\r\n  CanvasRenderer,\r\n  LineChart,\r\n  GridComponent,\r\n  TooltipComponent,\r\n  LegendComponent,\r\n  ToolboxComponent\r\n])\r\n\r\nconst props = defineProps<{\r\n  data: Array<{\r\n    date: string\r\n    positive: number\r\n    neutral: number\r\n    negative: number\r\n  }>\r\n  visibleLines: {\r\n    positive: boolean\r\n    neutral: boolean\r\n    negative: boolean\r\n  }\r\n  title?: string\r\n  isLoading?: boolean\r\n}>()\r\n\r\nconst emit = defineEmits<{\r\n  (e: 'toggleLine', line: 'positive' | 'neutral' | 'negative'): void\r\n}>()\r\n\r\ntype SeriesName = 'Positive' | 'Neutral' | 'Negative'\r\n\r\nconst createSeries = (\r\n  name: SeriesName,\r\n  data: number[],\r\n  color: string\r\n): LineSeriesOption => ({\r\n  name,\r\n  type: 'line',\r\n  data,\r\n  symbol: 'circle',\r\n  symbolSize: 6,\r\n  itemStyle: {\r\n    color,\r\n    borderWidth: 2,\r\n    borderColor: '#fff'\r\n  },\r\n  lineStyle: {\r\n    width: 3\r\n  },\r\n  showSymbol: true,\r\n  smooth: true,\r\n  emphasis: {\r\n    focus: 'series'\r\n  },\r\n  animation: true,\r\n  animationDuration: 1000,\r\n  animationEasing: 'cubicOut'\r\n})\r\n\r\nconst chartOption = computed(() => {\r\n  const series: LineSeriesOption[] = [\r\n    createSeries('Positive', props.data.map(item => item.positive), '#86efac'),\r\n    createSeries('Neutral', props.data.map(item => item.neutral), '#fde68a'),\r\n    createSeries('Negative', props.data.map(item => item.negative), '#fca5a5')\r\n  ].filter((series) => {\r\n    const name = series.name as SeriesName\r\n    return props.visibleLines[name.toLowerCase() as keyof typeof props.visibleLines]\r\n  })\r\n\r\n  return {\r\n    grid: {\r\n      top: '10%',\r\n      right: '2%',\r\n      bottom: '15%',\r\n      left: '2%',\r\n      containLabel: true\r\n    },\r\n    tooltip: {\r\n      trigger: 'axis',\r\n      backgroundColor: 'white',\r\n      borderColor: '#e5e7eb',\r\n      borderWidth: 1,\r\n      padding: 16,\r\n      textStyle: {\r\n        color: '#374151'\r\n      },\r\n      formatter: (params: any) => {\r\n        let result = `<div class=\"font-semibold mb-2\">Date: ${params[0].axisValue}</div>`\r\n        params.forEach((param: any) => {\r\n          const bgColor = param.seriesName === 'Positive' ? '#dcfce7' :\r\n                         param.seriesName === 'Negative' ? '#fee2e2' : '#fef9c3'\r\n          result += `\r\n            <div style=\"\r\n              display: flex;\r\n              justify-content: space-between;\r\n              align-items: center;\r\n              padding: 4px 8px;\r\n              margin: 2px 0;\r\n              background-color: ${bgColor};\r\n              border-radius: 4px;\r\n              font-size: 12px;\r\n            \">\r\n              <span>${param.seriesName}</span>\r\n              <span style=\"font-weight: 600\">${param.value}</span>\r\n            </div>\r\n          `\r\n        })\r\n        return result\r\n      }\r\n    },\r\n    xAxis: {\r\n      type: 'category',\r\n      data: props.data.map(item => item.date),\r\n      axisLine: {\r\n        show: false\r\n      },\r\n      axisTick: {\r\n        show: false\r\n      },\r\n      axisLabel: {\r\n        color: '#6b7280',\r\n        padding: [8, 0]\r\n      }\r\n    },\r\n    yAxis: {\r\n      type: 'value',\r\n      splitLine: {\r\n        lineStyle: {\r\n          type: 'dashed',\r\n          color: '#e5e7eb',\r\n          width: 1,\r\n          dashOffset: 3\r\n        }\r\n      },\r\n      axisLine: {\r\n        show: false\r\n      },\r\n      axisTick: {\r\n        show: false\r\n      },\r\n      axisLabel: {\r\n        color: '#6b7280',\r\n        padding: [0, 8]\r\n      },\r\n      splitNumber: 6\r\n    },\r\n    series\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"w-full h-[450px] bg-white border border-gray-200 rounded-lg p-6 flex flex-col\">\r\n    <div class=\"text-center\">\r\n      <h3 class=\"text-lg font-medium text-green-800\">{{ title || 'Mention Trends' }}</h3>\r\n    </div>\r\n    <div class=\"flex-1 min-h-0 w-full relative\">\r\n      <!-- Loading Skeleton -->\r\n      <div v-if=\"props.isLoading\" class=\"absolute inset-0 flex items-center justify-center\">\r\n        <div class=\"w-full h-full p-4 flex flex-col\">\r\n          <div class=\"flex-1 mb-12 relative border border-gray-200 rounded-lg\">\r\n            <!-- Y-axis ticks -->\r\n            <div class=\"absolute left-0 top-0 h-full w-16 flex flex-col justify-between py-4\">\r\n              <div class=\"h-4 w-10 bg-gray-100 rounded animate-pulse\"></div>\r\n              <div class=\"h-4 w-8 bg-gray-100 rounded animate-pulse\"></div>\r\n              <div class=\"h-4 w-12 bg-gray-100 rounded animate-pulse\"></div>\r\n              <div class=\"h-4 w-10 bg-gray-100 rounded animate-pulse\"></div>\r\n            </div>\r\n            \r\n            <!-- Chart area with line hints -->\r\n            <div class=\"absolute inset-0 ml-16 flex items-center\">\r\n              <div class=\"w-full h-40 relative\">\r\n                <div class=\"absolute inset-x-0 top-1/4 h-[2px] bg-gray-100 rounded animate-pulse\"></div>\r\n                <div class=\"absolute inset-x-0 top-2/4 h-[2px] bg-gray-100 rounded animate-pulse\"></div>\r\n                <div class=\"absolute inset-x-0 top-3/4 h-[2px] bg-gray-100 rounded animate-pulse\"></div>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- X-axis labels -->\r\n            <div class=\"absolute bottom-0 left-16 right-0 h-8 flex justify-between items-center px-4\">\r\n              <div class=\"h-4 w-16 bg-gray-100 rounded animate-pulse\"></div>\r\n              <div class=\"h-4 w-16 bg-gray-100 rounded animate-pulse\"></div>\r\n              <div class=\"h-4 w-16 bg-gray-100 rounded animate-pulse\"></div>\r\n              <div class=\"h-4 w-16 bg-gray-100 rounded animate-pulse\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Chart -->\r\n      <v-chart\r\n        v-show=\"!props.isLoading\"\r\n        class=\"w-full h-full\"\r\n        :option=\"chartOption\"\r\n        :autoresize=\"true\"\r\n      />\r\n    </div>\r\n    <div class=\"flex justify-center space-x-4\">\r\n      <button\r\n        @click=\"emit('toggleLine', 'positive')\"\r\n        :class=\"[\r\n          'px-4 py-2 text-sm font-normal rounded-md transition-colors duration-300',\r\n          visibleLines.positive\r\n            ? 'bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15'\r\n            : 'text-emerald-600 hover:bg-emerald-50'\r\n        ]\"\r\n      >\r\n        Positive\r\n      </button>\r\n      <button\r\n        @click=\"emit('toggleLine', 'neutral')\"\r\n        :class=\"[\r\n          'px-4 py-2 text-sm font-normal rounded-md transition-colors duration-300',\r\n          visibleLines.neutral\r\n            ? 'bg-gradient-to-r from-amber-500/10 to-amber-500/5 text-amber-700 hover:from-amber-500/20 hover:to-amber-500/15'\r\n            : 'text-amber-600 hover:bg-amber-50'\r\n        ]\"\r\n      >\r\n        Neutral\r\n      </button>\r\n      <button\r\n        @click=\"emit('toggleLine', 'negative')\"\r\n        :class=\"[\r\n          'px-4 py-2 text-sm font-normal rounded-md transition-colors duration-300',\r\n          visibleLines.negative\r\n            ? 'bg-gradient-to-r from-rose-500/10 to-rose-500/5 text-rose-700 hover:from-rose-500/20 hover:to-rose-500/15'\r\n            : 'text-rose-600 hover:bg-rose-50'\r\n        ]\"\r\n      >\r\n        Negative\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.echarts {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { Card } from '@/components/ui/card'\r\nimport {\r\n  Search,\r\n  ArrowUpDown,\r\n  ExternalLink,\r\n  MessageCircle,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Minus,\r\n  RefreshCw,\r\n  Globe,\r\n  Hash,\r\n  ThumbsUp,\r\n  LineChart,\r\n  Clock\r\n} from 'lucide-vue-next'\r\nimport Pagination from '@/components/common/Pagination.vue'\r\nimport analyticsImage from '@/assets/images/analytics/analytics-green.png'\r\nimport MentionsChart from './mentions/components/MentionsChart.vue'\r\nimport { useMentions } from '@/composables/useMentions'\r\n\r\n// Initialize mentions composable\r\nconst {\r\n  mentions,\r\n  isLoading,\r\n  error,\r\n  totalMentions,\r\n  positiveMentions,\r\n  negativeMentions,\r\n  neutralMentions,\r\n  totalPages,\r\n  fetchMentions,\r\n  retrySentiment,\r\n  graphData,\r\n  availableKeywords\r\n} = useMentions()\r\n\r\n// Date input refs\r\nconst startDateRef = ref<HTMLInputElement | null>(null)\r\nconst endDateRef = ref<HTMLInputElement | null>(null)\r\n\r\n// Track which mentions are being retried\r\nconst retryingMentions = ref<Set<number>>(new Set())\r\n\r\n// Handle retry sentiment\r\nconst handleRetrySentiment = async (mentionId: number) => {\r\n  retryingMentions.value.add(mentionId)\r\n  try {\r\n    await retrySentiment(mentionId)\r\n  } catch (err) {\r\n    console.error('Failed to retry sentiment analysis:', err)\r\n  } finally {\r\n    retryingMentions.value.delete(mentionId)\r\n  }\r\n}\r\n\r\n// Pagination and filtering\r\nconst currentPage = ref(1)\r\nconst selectedSentiment = ref('all')\r\nconst selectedPlatform = ref('all-platforms')\r\nconst selectedKeyword = ref('all-keywords')\r\nconst searchQuery = ref('')\r\nconst sortDirection = ref<'asc' | 'desc'>('desc')\r\nconst visibleLines = ref({\r\n  positive: true,\r\n  neutral: true,\r\n  negative: true\r\n})\r\n\r\n// Date range filters with proper initialization\r\nconst initializeDates = () => {\r\n  const today = new Date()\r\n  const thirtyDaysAgo = new Date()\r\n  thirtyDaysAgo.setDate(today.getDate() - 30)\r\n\r\n  console.log('Initializing dates:', {\r\n    today: today.toISOString(),\r\n    thirtyDaysAgo: thirtyDaysAgo.toISOString(),\r\n    startDate: thirtyDaysAgo.toISOString().split('T')[0],\r\n    endDate: today.toISOString().split('T')[0]\r\n  })\r\n  startDate.value = thirtyDaysAgo.toISOString().split('T')[0]\r\n  endDate.value = today.toISOString().split('T')[0]\r\n}\r\n\r\nconst startDate = ref('')\r\nconst endDate = ref('')\r\n\r\n// Reset filters and initialize\r\nconst resetFilters = () => {\r\n  currentPage.value = 1\r\n  selectedSentiment.value = 'all'\r\n  selectedPlatform.value = 'all-platforms'\r\n  selectedKeyword.value = 'all-keywords'\r\n  searchQuery.value = ''\r\n  sortDirection.value = 'desc'\r\n  initializeDates()\r\n}\r\n\r\n// Initialize dates and fetch data\r\nonMounted(() => {\r\n  resetFilters()\r\n  fetchMentions(createFilters(1))\r\n})\r\n\r\n\r\n// Compute chart title based on date range\r\nconst chartTitle = computed(() => {\r\n  const start = new Date(startDate.value)\r\n  const end = new Date(endDate.value)\r\n  const diffDays = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24))\r\n  return `Mention Trends (${diffDays} Days)`\r\n})\r\n\r\ninterface GraphPoint {\r\n  date: string\r\n  positive: number\r\n  negative: number\r\n  neutral: number\r\n}\r\n\r\n// Transform API graph data into chart format\r\nconst chartData = computed(() => {\r\n  if (!graphData.value) return []\r\n\r\n  return graphData.value.map((point: GraphPoint) => ({\r\n    date: new Date(point.date).toLocaleDateString('en-US', { month: 'numeric', day: 'numeric' }),\r\n    positive: point.positive,\r\n    neutral: point.neutral,\r\n    negative: point.negative\r\n  }))\r\n})\r\n\r\n// Methods\r\n// Process and highlight content\r\nconst processContent = (content: string, keyword: string): string => {\r\n  // Escape HTML to prevent XSS\r\n  const escapeHtml = (text: string) => {\r\n    return text\r\n      .replace(/&/g, \"&amp;\")\r\n      .replace(/</g, \"&lt;\")\r\n      .replace(/>/g, \"&gt;\")\r\n      .replace(/\"/g, \"&quot;\")\r\n      .replace(/'/g, \"&#039;\");\r\n  }\r\n\r\n  // Create a completely stripped version for matching\r\n  const stripText = (text: string): string => {\r\n    return text\r\n      .toLowerCase()\r\n      .replace(/[^a-z0-9]/g, '') // Remove everything except letters and numbers\r\n  }\r\n\r\n  // Find all possible matches in the original text\r\n  const findMatches = (content: string, keyword: string) => {\r\n    const strippedKeyword = stripText(keyword)\r\n    const matches: { start: number, end: number, text: string }[] = []\r\n    const matchedRanges = new Set<number>() // Track matched positions\r\n\r\n    // Sliding window approach to find matches\r\n    for (let i = 0; i < content.length; i++) {\r\n      // Skip if this position is already part of a match\r\n      if (matchedRanges.has(i)) continue\r\n\r\n      // Look ahead up to 2x the keyword length to account for extra spaces/punctuation\r\n      const windowSize = keyword.length * 2\r\n      const chunk = content.slice(i, i + windowSize)\r\n\r\n      if (stripText(chunk).includes(strippedKeyword)) {\r\n        // Find the exact boundaries of the match in the original text\r\n        let start = i\r\n        let end = i\r\n        let found = false\r\n\r\n        // Expand the end position until we no longer match\r\n        while (end <= i + windowSize && !found) {\r\n          const current = content.slice(start, end)\r\n          const stripped = stripText(current)\r\n\r\n          if (stripped === strippedKeyword) {\r\n            // Verify word boundaries\r\n            const beforeChar = start > 0 ? content[start - 1] : ' '\r\n            const afterChar = end < content.length ? content[end] : ' '\r\n            const isWordBoundary = /[^a-zA-Z0-9]/.test(beforeChar) && /[^a-zA-Z0-9]/.test(afterChar)\r\n\r\n            if (isWordBoundary) {\r\n              // Trim whitespace from match boundaries\r\n              let trimStart = start\r\n              let trimEnd = end\r\n\r\n              // Trim leading whitespace\r\n              while (trimStart < trimEnd && /\\s/.test(content[trimStart])) {\r\n                trimStart++\r\n              }\r\n\r\n              // Trim trailing whitespace\r\n              while (trimEnd > trimStart && /\\s/.test(content[trimEnd - 1])) {\r\n                trimEnd--\r\n              }\r\n\r\n              // Add trimmed match and mark its range as matched\r\n              matches.push({\r\n                start: trimStart,\r\n                end: trimEnd,\r\n                text: content.slice(trimStart, trimEnd)\r\n              })\r\n\r\n              for (let pos = trimStart; pos < trimEnd; pos++) {\r\n                matchedRanges.add(pos)\r\n              }\r\n              found = true\r\n            }\r\n          }\r\n          end++\r\n        }\r\n      }\r\n    }\r\n\r\n    return matches\r\n  }\r\n\r\n  const escapedContent = escapeHtml(content)\r\n  const matches = findMatches(escapedContent, keyword)\r\n\r\n  if (matches.length === 0) {\r\n    // If no matches found, just truncate\r\n    return escapedContent.length > 800\r\n      ? escapedContent.slice(0, 797) + '...'\r\n      : escapedContent\r\n  }\r\n\r\n  // Use the first match for centering\r\n  const firstMatch = matches[0]\r\n  let start = Math.max(0, firstMatch.start - 400)\r\n  let end = Math.min(escapedContent.length, firstMatch.end + 400)\r\n\r\n  // Adjust if content is less than 800 characters\r\n  if (end - start < 800) {\r\n    start = Math.max(0, start - (800 - (end - start)))\r\n    end = Math.min(escapedContent.length, end + (800 - (end - start)))\r\n  }\r\n\r\n  // Add ellipsis if truncated\r\n  const prefix = start > 0 ? '...' : ''\r\n  const suffix = end < escapedContent.length ? '...' : ''\r\n\r\n  // Build the highlighted content with all matches within the window\r\n  let result = ''\r\n  let lastIndex = start\r\n\r\n  matches.forEach(match => {\r\n    if (match.start >= start && match.end <= end) {\r\n      result += escapedContent.slice(lastIndex, match.start)\r\n      result += `<span class=\"bg-green-100 text-green-800\">${escapedContent.slice(match.start, match.end)\r\n        }</span>`\r\n      lastIndex = match.end\r\n    }\r\n  })\r\n\r\n  result += escapedContent.slice(lastIndex, end)\r\n  return `${prefix}${result}${suffix}`\r\n}\r\n\r\nconst formatDate = (dateString: string) => {\r\n  const date = new Date(dateString)\r\n  return new Intl.DateTimeFormat('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n    hour: 'numeric',\r\n    minute: '2-digit',\r\n    hour12: true\r\n  }).format(date)\r\n}\r\n\r\nconst getSourceColor = (source: string) => {\r\n  switch (source.toLowerCase()) {\r\n    case 'rollitup.org':\r\n      return 'bg-gradient-to-r from-green-500/10 to-green-500/5 text-green-700 hover:from-green-500/20 hover:to-green-500/15'\r\n    case 'thcfarmer':\r\n      return 'bg-gradient-to-r from-blue-500/10 to-blue-500/5 text-blue-700 hover:from-blue-500/20 hover:to-blue-500/15'\r\n    case 'icmag.com':\r\n      return 'bg-gradient-to-r from-purple-500/10 to-purple-500/5 text-purple-700 hover:from-purple-500/20 hover:to-purple-500/15'\r\n    case '420magazine.com':\r\n      return 'bg-gradient-to-r from-orange-500/10 to-orange-500/5 text-orange-700 hover:from-orange-500/20 hover:to-orange-500/15'\r\n    case 'overgrow.com':\r\n      return 'bg-gradient-to-r from-pink-500/10 to-pink-500/5 text-pink-700 hover:from-pink-500/20 hover:to-pink-500/15'\r\n    case 'ilgmforum.com':\r\n      return 'bg-gradient-to-r from-indigo-500/10 to-indigo-500/5 text-indigo-700 hover:from-indigo-500/20 hover:to-indigo-500/15'\r\n    case 'homegrowncannabisco.community':\r\n      return 'bg-gradient-to-r from-teal-500/10 to-teal-500/5 text-teal-700 hover:from-teal-500/20 hover:to-teal-500/15'\r\n    case 'growersnetwork.org':\r\n      return 'bg-gradient-to-r from-amber-500/10 to-amber-500/5 text-amber-700 hover:from-amber-500/20 hover:to-amber-500/15'\r\n    case 'reddit.com':\r\n      return 'bg-gradient-to-r from-orange-500/10 to-orange-500/5 text-orange-700 hover:from-orange-500/20 hover:to-orange-500/15'\r\n    case 'marijuanapassion.com':\r\n      return 'bg-gradient-to-r from-lime-500/10 to-lime-500/5 text-lime-700 hover:from-lime-500/20 hover:to-lime-500/15'\r\n    case 'growweedeasy.com':\r\n      return 'bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15'\r\n    case 'beanbasement.nl':\r\n      return 'bg-gradient-to-r from-violet-500/10 to-violet-500/5 text-violet-700 hover:from-violet-500/20 hover:to-violet-500/15'\r\n    case 'phenohunter.org':\r\n      return 'bg-gradient-to-r from-cyan-500/10 to-cyan-500/5 text-cyan-700 hover:from-cyan-500/20 hover:to-cyan-500/15'\r\n    case 'uk420.com':\r\n      return 'bg-gradient-to-r from-fuchsia-500/10 to-fuchsia-500/5 text-fuchsia-700 hover:from-fuchsia-500/20 hover:to-fuchsia-500/15'\r\n    case 'percysgrowroom.com':\r\n      return 'bg-gradient-to-r from-rose-500/10 to-rose-500/5 text-rose-700 hover:from-rose-500/20 hover:to-rose-500/15'\r\n    case '420sa.co.za':\r\n      return 'bg-gradient-to-r from-sky-500/10 to-sky-500/5 text-sky-700 hover:from-sky-500/20 hover:to-sky-500/15'\r\n    default:\r\n      return 'bg-gradient-to-r from-gray-500/10 to-gray-500/5 text-gray-700 hover:from-gray-500/20 hover:to-gray-500/15'\r\n  }\r\n}\r\n\r\nconst toggleLine = (line: 'positive' | 'neutral' | 'negative') => {\r\n  visibleLines.value[line] = !visibleLines.value[line]\r\n}\r\n\r\nconst toggleSortDirection = () => {\r\n  sortDirection.value = sortDirection.value === 'asc' ? 'desc' : 'asc'\r\n}\r\n\r\n\r\n// Platform mapping for consistent comparison\r\nconst platformMapping: Record<string, string[]> = {\r\n  'rollitup.org': ['rollitup.org', 'rollitup'],\r\n  'thcfarmer': ['thcfarmer', 'THCFarmer', 'thc farmer'],\r\n  'icmag.com': ['icmag.com', 'icmag', 'ic mag'],\r\n  '420magazine.com': ['420magazine.com', '420magazine', '420 magazine'],\r\n  'overgrow.com': ['overgrow.com', 'overgrow', 'over grow'],\r\n  'ilgmforum.com': ['ilgmforum.com', 'ilgm forum', 'ilgm'],\r\n  'homegrowncannabisco.community': ['homegrowncannabisco.community', 'homegrown cannabis co', 'homegrown'],\r\n  'growersnetwork.org': ['growersnetwork.org', 'growers network', 'growersnetwork'],\r\n  'reddit.com': ['reddit.com', 'reddit', 'r/'],\r\n  'autoflower.org': ['autoflower.org', 'autoflower', 'auto flower'],\r\n  'marijuanapassion.com': ['marijuanapassion.com', 'marijuana passion', 'marijuanapassion'],\r\n  'growweedeasy.com': ['growweedeasy.com', 'grow weed easy', 'growweedeasy'],\r\n  'beanbasement.nl': ['beanbasement.nl', 'bean basement', 'beanbasement'],\r\n  'phenohunter.org': ['phenohunter.org', 'pheno hunter', 'phenohunter'],\r\n  'uk420.com': ['uk420.com', 'uk420', 'uk 420'],\r\n  'percysgrowroom.com': ['percysgrowroom.com', 'percys grow room', 'percysgrowroom'],\r\n  '420sa.co.za': ['420sa.co.za', '420sa', '420 sa']\r\n}\r\n\r\n// Debounce utility\r\nconst debounce = (fn: Function, delay: number) => {\r\n  let timeoutId: NodeJS.Timeout\r\n  return (...args: any[]) => {\r\n    clearTimeout(timeoutId)\r\n    timeoutId = setTimeout(() => fn(...args), delay)\r\n  }\r\n}\r\n\r\n// Debounced fetch function that includes all filters\r\nconst debouncedFetch = debounce((query: string) => {\r\n  const filters = {\r\n    page: 1, // Reset to page 1 for new searches\r\n    start_date: startDate.value,\r\n    end_date: endDate.value,\r\n    sentiment: selectedSentiment.value === 'all' ? undefined : selectedSentiment.value,\r\n    platforms: selectedPlatform.value === 'all-platforms' ? undefined : selectedPlatform.value,\r\n    keyword: selectedKeyword.value === 'all-keywords' ? undefined : selectedKeyword.value,\r\n    search: query,\r\n    ordering: sortDirection.value === 'asc' ? 'post_date' : '-post_date'\r\n  }\r\n  fetchMentions(filters)\r\n}, 1000) // Use 1 second delay like Reviews.vue\r\n\r\n// Watch search query changes\r\nwatch(searchQuery, (newValue) => {\r\n  debouncedFetch(newValue)\r\n})\r\n\r\n// Function to create filters object\r\nconst createFilters = (page = 1) => ({\r\n  page,\r\n  start_date: startDate.value,\r\n  end_date: endDate.value,\r\n  sentiment: selectedSentiment.value === 'all' ? undefined : selectedSentiment.value,\r\n  platforms: selectedPlatform.value === 'all-platforms' ? undefined : selectedPlatform.value,\r\n  keyword: selectedKeyword.value === 'all-keywords' ? undefined : selectedKeyword.value,\r\n  search: searchQuery.value,\r\n  ordering: sortDirection.value === 'asc' ? 'post_date' : '-post_date'\r\n})\r\n\r\n// Watch other filters\r\nwatch([selectedSentiment, selectedPlatform, selectedKeyword, sortDirection], () => {\r\n  fetchMentions(createFilters(1))\r\n})\r\n\r\n// Watch date changes\r\nwatch([startDate, endDate], () => {\r\n  fetchMentions(createFilters(1))\r\n})\r\n\r\n// Watch page changes\r\nwatch(currentPage, (newPage) => {\r\n  fetchMentions(createFilters(newPage))\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex-1 p-2 md:p-6\">\r\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2 md:py-8\">\r\n      <!-- Welcome Section -->\r\n      <div class=\"mb-8 bg-white rounded-lg shadow-sm p-6\">\r\n        <div class=\"flex flex-col md:flex-row items-center gap-6\">\r\n          <div class=\"flex-1 text-center md:text-left\">\r\n            <h1 class=\"text-lg md:text-2xl font-medium text-green-800 mb-2 text-center md:text-left\">\r\n              Brand Mentions\r\n            </h1>\r\n            <p class=\"text-gray-600 text-sm sm:text-md md:text-lg\">\r\n              Track every conversation about your brand across the growing community. We've gathered mentions from\r\n              forums, social platforms, and industry sites to show you exactly where and how your brand is being\r\n              discussed. Dive into real-time conversations, monitor sentiment shifts, and spot emerging trends as they\r\n              happen. From casual discussions to detailed reviews, stay informed about what cultivators are saying about\r\n              your products.\r\n            </p>\r\n          </div>\r\n          <div class=\"w-full max-w-xs sm:max-w-sm md:w-48 md:h-48 flex-shrink-0 relative\">\r\n            <img :src=\"analyticsImage\" alt=\"Brand Mentions illustration\" class=\"w-full h-full object-contain\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Summary Cards -->\r\n      <div class=\"mb-8\">\r\n        <div class=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n          <!-- Total Mentions -->\r\n          <Card\r\n            class=\"flex-1 shadow-sm hover:shadow-md transition-all duration-200 border border-blue-500/10 bg-gradient-to-br from-blue-100/60 to-indigo-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-blue-700\">Total Mentions</p>\r\n                <MessageCircle class=\"h-4 w-4 text-blue-700\" />\r\n              </div>\r\n              <div class=\"flex flex-col\">\r\n                <div v-if=\"isLoading\" class=\"space-y-2\">\r\n                  <div class=\"h-8 bg-blue-200/50 rounded animate-pulse w-16\"></div>\r\n                  <div class=\"h-4 bg-blue-200/50 rounded animate-pulse w-24\"></div>\r\n                </div>\r\n                <template v-else>\r\n                  <div class=\"text-3xl font-bold text-blue-700\">{{ totalMentions }}</div>\r\n                  <p class=\"mt-2 text-sm text-blue-700/80\">Across all platforms</p>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          <!-- Positive Mentions -->\r\n          <Card\r\n            class=\"flex-1 shadow-sm hover:shadow-md transition-all duration-200 border border-emerald-500/10 bg-gradient-to-br from-emerald-100/60 to-green-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-emerald-700\">Positive Mentions</p>\r\n                <TrendingUp class=\"h-4 w-4 text-emerald-700\" />\r\n              </div>\r\n              <div class=\"flex flex-col\">\r\n                <div v-if=\"isLoading\" class=\"space-y-2\">\r\n                  <div class=\"h-8 bg-emerald-200/50 rounded animate-pulse w-16\"></div>\r\n                  <div class=\"h-4 bg-emerald-200/50 rounded animate-pulse w-24\"></div>\r\n                </div>\r\n                <template v-else>\r\n                  <div class=\"text-3xl font-bold text-emerald-700\">{{ positiveMentions }}</div>\r\n                  <p class=\"mt-2 text-sm text-emerald-700/80\">\r\n                    {{ ((positiveMentions / totalMentions) * 100).toFixed(1) }}% of total\r\n                  </p>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          <!-- Negative Mentions -->\r\n          <Card\r\n            class=\"flex-1 shadow-sm hover:shadow-md transition-all duration-200 border border-rose-500/10 bg-gradient-to-br from-rose-100/60 to-red-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-rose-700\">Negative Mentions</p>\r\n                <TrendingDown class=\"h-4 w-4 text-rose-700\" />\r\n              </div>\r\n              <div class=\"flex flex-col\">\r\n                <div v-if=\"isLoading\" class=\"space-y-2\">\r\n                  <div class=\"h-8 bg-rose-200/50 rounded animate-pulse w-16\"></div>\r\n                  <div class=\"h-4 bg-rose-200/50 rounded animate-pulse w-24\"></div>\r\n                </div>\r\n                <template v-else>\r\n                  <div class=\"text-3xl font-bold text-rose-700\">{{ negativeMentions }}</div>\r\n                  <p class=\"mt-2 text-sm text-rose-700/80\">\r\n                    {{ ((negativeMentions / totalMentions) * 100).toFixed(1) }}% of total\r\n                  </p>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          <!-- Neutral Mentions -->\r\n          <Card\r\n            class=\"flex-1 shadow-sm hover:shadow-md transition-all duration-200 border border-amber-500/10 bg-gradient-to-br from-amber-100/60 to-yellow-100/60\">\r\n            <div class=\"p-6\">\r\n              <div class=\"flex items-center justify-between mb-4\">\r\n                <p class=\"text-sm font-medium text-amber-700\">Neutral Mentions</p>\r\n                <Minus class=\"h-4 w-4 text-amber-700\" />\r\n              </div>\r\n              <div class=\"flex flex-col\">\r\n                <div v-if=\"isLoading\" class=\"space-y-2\">\r\n                  <div class=\"h-8 bg-amber-200/50 rounded animate-pulse w-16\"></div>\r\n                  <div class=\"h-4 bg-amber-200/50 rounded animate-pulse w-24\"></div>\r\n                </div>\r\n                <template v-else>\r\n                  <div class=\"text-3xl font-bold text-amber-700\">{{ neutralMentions }}</div>\r\n                  <p class=\"mt-2 text-sm text-amber-700/80\">\r\n                    {{ ((neutralMentions / totalMentions) * 100).toFixed(1) }}% of total\r\n                  </p>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n      <!-- Chart Section -->\r\n      <div class=\"mb-8 bg-white rounded-lg shadow-sm\">\r\n        <template v-if=\"chartData.length === 0\">\r\n          <div class=\"flex flex-col items-center justify-center h-64 p-6 text-center\">\r\n            <div class=\"w-16 h-16 bg-violet-50 rounded-full flex items-center justify-center mb-6 mt-5 md:mt-0\">\r\n              <LineChart class=\"w-8 md:h-8 h-16 text-violet-400\" />\r\n            </div>\r\n\r\n            <!-- Text Content -->\r\n            <h3 class=\"md:text-lg font-medium text-gray-700 mb-2 text-md\">\r\n              No Mention Trends Available\r\n            </h3>\r\n            <p class=\"text-gray-500 text-sm mb-5 max-w-[700px]\">\r\n              Track how your brand mentions change over time. Data will appear here after 30 days of monitoring.\r\n            </p>\r\n\r\n          </div>\r\n        </template>\r\n        <template v-else>\r\n          <MentionsChart :data=\"chartData\" :visible-lines=\"visibleLines\" :title=\"chartTitle\" :is-loading=\"isLoading\"\r\n            @toggle-line=\"toggleLine\" />\r\n        </template>\r\n      </div>\r\n\r\n      <!-- Filters Section -->\r\n      <div class=\"mb-8 bg-white rounded-lg shadow-sm\">\r\n        <div class=\"p-6 space-y-4\">\r\n          <div class=\"text-center\">\r\n            <h2 class=\"text-center md:text-left md:text-lg font-medium text-gray-700 text-md\">Mention Filters</h2>\r\n            <p class=\"text-sm sm:text-md text-gray-500 text-sm sm:text-md\">\r\n              Filter mentions by platform, keyword, sentiment, and search terms to focus your analysis.\r\n            </p>\r\n          </div>\r\n          <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n            <!-- Date Range -->\r\n            <div class=\"flex flex-col space-y-4\">\r\n              <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <div class=\"relative\">\r\n                  <label class=\"block relative cursor-pointer\">\r\n                    <input ref=\"startDateRef\" v-model=\"startDate\" type=\"date\" placeholder=\"Start Date (YYYY-MM-DD)\"\r\n                      class=\"w-full pl-3 pr-3 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 [direction:rtl] [text-align-last:left] [&::-webkit-calendar-picker-indicator]:ml-0\" />\r\n                    <div class=\"absolute inset-0\" @click=\"startDateRef?.showPicker()\"></div>\r\n                  </label>\r\n                </div>\r\n                <div class=\"relative\">\r\n                  <label class=\"block relative cursor-pointer\">\r\n                    <input ref=\"endDateRef\" v-model=\"endDate\" type=\"date\" placeholder=\"End Date (YYYY-MM-DD)\"\r\n                      class=\"w-full pl-3 pr-3 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 [direction:rtl] [text-align-last:left] [&::-webkit-calendar-picker-indicator]:ml-0\" />\r\n                    <div class=\"absolute inset-0\" @click=\"endDateRef?.showPicker()\"></div>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Keyword Filter -->\r\n            <div class=\"flex flex-col space-y-4\">\r\n              <div class=\"relative\">\r\n                <Hash class=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none\" />\r\n                <select v-model=\"selectedKeyword\"\r\n                  class=\"w-full bg-white border border-gray-300 rounded-md pl-10 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 appearance-none\">\r\n                  <option value=\"all-keywords\">All Keywords</option>\r\n                  <option v-for=\"keyword in availableKeywords\" :key=\"keyword\" :value=\"keyword\">\r\n                    {{ keyword }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Search Filter -->\r\n            <div class=\"flex flex-col space-y-4\">\r\n              <div class=\"relative\">\r\n                <Search class=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none\" />\r\n                <input v-model=\"searchQuery\" type=\"text\" placeholder=\"Search mentions...\" :disabled=\"isLoading\"\r\n                  class=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 disabled:bg-gray-50 disabled:cursor-not-allowed\" />\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Platform Filter -->\r\n            <div class=\"flex flex-col space-y-4\">\r\n              <div class=\"relative\">\r\n                <Globe class=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none\" />\r\n                <select v-model=\"selectedPlatform\"\r\n                  class=\"w-full bg-white border border-gray-300 rounded-md pl-10 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 appearance-none\">\r\n                  <option value=\"all-platforms\">All Platforms</option>\r\n                  <option value=\"420magazine.com\">420 Magazine</option>\r\n                  <option value=\"420sa.co.za\">420SA</option>\r\n                  <option value=\"autoflower.org\">Autoflower</option>\r\n                  <option value=\"beanbasement.nl\">Bean Basement</option>\r\n                  <option value=\"growersnetwork.org\">Growers Network</option>\r\n                  <option value=\"growweedeasy.com\">GrowWeedEasy</option>\r\n                  <option value=\"homegrowncannabisco.community\">Homegrown Cannabis Co</option>\r\n                  <option value=\"icmag.com\">ICMag</option>\r\n                  <option value=\"ilgmforum.com\">ILGM Forum</option>\r\n                  <option value=\"marijuanapassion.com\">Marijuana Passion</option>\r\n                  <option value=\"overgrow.com\">Overgrow</option>\r\n                  <option value=\"percysgrowroom.com\">Percy's Grow Room</option>\r\n                  <option value=\"phenohunter.org\">PhenoHunter</option>\r\n                  <option value=\"reddit.com\">Reddit</option>\r\n                  <option value=\"rollitup.org\">RollItUp</option>\r\n                  <option value=\"thcfarmer.com\">THCFarmer</option>\r\n                  <option value=\"uk420.com\">UK420</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Sentiment Filter -->\r\n            <div class=\"flex flex-col space-y-4\">\r\n              <div class=\"relative\">\r\n                <ThumbsUp class=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none\" />\r\n                <select v-model=\"selectedSentiment\"\r\n                  class=\"w-full bg-white border border-gray-300 rounded-md pl-10 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 appearance-none\">\r\n                  <option value=\"all\">All Sentiments</option>\r\n                  <option value=\"positive\">Positive</option>\r\n                  <option value=\"neutral\">Neutral</option>\r\n                  <option value=\"negative\">Negative</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Sort Button -->\r\n            <div class=\"flex flex-col space-y-4\">\r\n              <div class=\"relative\">\r\n                <ArrowUpDown\r\n                  class=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none\" />\r\n                <button @click=\"toggleSortDirection\"\r\n                  class=\"w-full pl-10 pr-3 py-2 bg-white border border-gray-300 rounded-md text-gray-700 text-left hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500\">\r\n                  Sort by Date\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div v-if=\"isLoading\" class=\"space-y-6\">\r\n        <div v-for=\"i in 5\" :key=\"i\" class=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\r\n          <div class=\"p-6\">\r\n            <div class=\"flex items-start justify-between mb-4\">\r\n              <div class=\"space-y-1\">\r\n                <div class=\"flex items-center gap-2 mb-2\">\r\n                  <div class=\"h-6 bg-gray-200 rounded animate-pulse w-24\"></div>\r\n                  <div class=\"h-6 bg-gray-200 rounded animate-pulse w-32\"></div>\r\n                </div>\r\n                <div class=\"h-7 bg-gray-200 rounded animate-pulse w-96\"></div>\r\n              </div>\r\n              <div class=\"h-8 bg-gray-200 rounded animate-pulse w-20\"></div>\r\n            </div>\r\n            <div class=\"space-y-2\">\r\n              <div class=\"h-4 bg-gray-200 rounded animate-pulse w-full\"></div>\r\n              <div class=\"h-4 bg-gray-200 rounded animate-pulse w-3/4\"></div>\r\n            </div>\r\n            <div class=\"flex items-center justify-between mt-4\">\r\n              <div class=\"flex items-center space-x-2\">\r\n                <div class=\"h-4 bg-gray-200 rounded animate-pulse w-24\"></div>\r\n                <div class=\"h-4 bg-gray-200 rounded animate-pulse w-32\"></div>\r\n              </div>\r\n              <div class=\"h-8 bg-gray-200 rounded animate-pulse w-20\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Error State -->\r\n      <div v-else-if=\"error\" class=\"text-center py-8 text-red-600\">\r\n        {{ error }}\r\n        <!-- <div class=\"relative group mt-3\">\r\n          <div\r\n            class=\"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100\">\r\n\r\n            <div class=\"flex  justify-between mb-4 flex-col sm:flex-row\">\r\n              <div class=\"flex space-x-3 mb-3 sm:mb-0\">\r\n                <div\r\n                  class=\"w-10 h-10 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center text-green-600 font-bold\">\r\n                  J\r\n                </div>\r\n                <div>\r\n                  <h3 class=\"text-gray-700 font-medium\">John Doe</h3>\r\n                  <p class=\"text-gray-500 text-sm flex items-center\">\r\n                    <Clock class=\"w-3 h-3 mr-1\" />\r\n                    Jan 20, 2025\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div class=\"flex gap-3 flex-wrap sm:flex-nowrap\">\r\n                <span\r\n                  class=\"inline-flex items-center justify-center px-3 py-1 rounded-md text-sm font-normal bg-blue-100 text-blue-700\">\r\n                  Twitter\r\n                </span>\r\n                <span\r\n                  class=\"inline-flex items-center justify-center px-3 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-sky-500/10 to-blue-500/5 text-blue-700 hover:from-sky-500/20 hover:to-blue-500/15 transition-colors duration-300\">\r\n                  Static Keyword\r\n                </span>\r\n                <span\r\n                  class=\"inline-flex items-center space-x-1 w-24 px-2 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                  <TrendingUp class=\"w-4 h-4 mr-1\" />\r\n                  <span class=\"text-sm font-normal\">Positive</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <hr class=\"my-4 border-t border-gray-100\" />\r\n\r\n            <div>\r\n              <h2 class=\"text-lg font-medium text-gray-700 mb-4\">\r\n                Static Title Example with Keyword Highlighted\r\n              </h2>\r\n              <p class=\"text-gray-600 leading-relaxed mb-4 text-center\">\r\n                This is a static content example where the keyword appears in the text. The content is purely for\r\n                demonstration purposes.\r\n              </p>\r\n            </div>\r\n\r\n            <div class=\"flex justify-end\">\r\n              <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n                class=\"inline-flex items-center px-3 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-gray-500/10 to-gray-500/5 text-gray-700 hover:from-gray-500/20 hover:to-gray-500/10 transition-all duration-300\">\r\n                View\r\n                <ExternalLink class=\"w-4 h-4 ml-1\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"relative group mt-3\">\r\n          <div\r\n            class=\"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100\">\r\n\r\n            <div class=\"flex justify-between mb-4 flex-col sm:flex-row\">\r\n              <div class=\"flex items-center space-x-3 mb-3 sm:mb-0\">\r\n                <div\r\n                  class=\"w-10 h-10 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center text-green-600 font-bold\">\r\n                  J\r\n                </div>\r\n                <div>\r\n                  <h3 class=\"text-gray-700 font-medium\">John Doe</h3>\r\n                  <p class=\"text-gray-500 text-sm flex items-center\">\r\n                    <Clock class=\"w-3 h-3 mr-1\" />\r\n                    Jan 20, 2025\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div class=\"flex gap-3 flex-wrap sm:flex-nowrap\">\r\n                <span\r\n                  class=\"inline-flex items-center justify-center px-3 py-1 rounded-md text-sm font-normal bg-blue-100 text-blue-700\">\r\n                  Twitter\r\n                </span>\r\n                <span\r\n                  class=\"inline-flex items-center justify-center px-3 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-sky-500/10 to-blue-500/5 text-blue-700 hover:from-sky-500/20 hover:to-blue-500/15 transition-colors duration-300\">\r\n                  Static Keyword\r\n                </span>\r\n                <span\r\n                  class=\"inline-flex items-center space-x-1 w-24 px-2 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15 transition-colors duration-300\">\r\n                  <TrendingUp class=\"w-4 h-4 mr-1\" />\r\n                  <span class=\"text-sm font-normal\">Positive</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <hr class=\"my-4 border-t border-gray-100\" />\r\n\r\n            <div>\r\n              <h2 class=\"text-lg font-medium text-gray-700 mb-4\">\r\n                Static Title Example with Keyword Highlighted\r\n              </h2>\r\n              <p class=\"text-gray-600 leading-relaxed mb-4 text-center\">\r\n                This is a static content example where the keyword appears in the text. The content is purely for\r\n                demonstration purposes.\r\n              </p>\r\n            </div>\r\n\r\n            <div class=\"flex justify-end\">\r\n              <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n                class=\"inline-flex items-center px-3 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-gray-500/10 to-gray-500/5 text-gray-700 hover:from-gray-500/20 hover:to-gray-500/10 transition-all duration-300\">\r\n                View\r\n                <ExternalLink class=\"w-4 h-4 ml-1\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div> -->\r\n\r\n      </div>\r\n\r\n      <!-- Mentions List -->\r\n      <div v-else class=\"space-y-6\">\r\n        <div v-for=\"mention in mentions\" :key=\"mention.id\" class=\"relative group\">\r\n          <div\r\n            class=\"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100\">\r\n\r\n            <div class=\"flex justify-between mb-4 flex-col sm:flex-row\">\r\n              <div class=\"flex items-center space-x-3 mb-3 sm:mb-0\">\r\n                <div\r\n                  class=\"w-10 h-10 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center text-green-600 font-bold\">\r\n                  {{ mention.author[0].toUpperCase() }}\r\n                </div>\r\n                <div>\r\n                  <h3 class=\"text-gray-700 font-medium\">{{ mention.author }}</h3>\r\n                  <p class=\"text-gray-500 text-sm flex items-center\">\r\n                    <Clock class=\"w-3 h-3 mr-1\" />\r\n                    {{ formatDate(mention.post_date) }}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div class=\"flex gap-3 flex-wrap sm:flex-nowrap\">\r\n                <span\r\n                  class=\"inline-flex items-center justify-center px-3 py-1 rounded-md text-sm font-normal transition-colors duration-300\"\r\n                  :class=\"getSourceColor(mention.source)\">\r\n                  <span class=\"text-sm font-normal\">{{ mention.source }}</span>\r\n                </span>\r\n                <span\r\n                  class=\"inline-flex items-center justify-center px-3 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-sky-500/10 to-blue-500/5 text-blue-700 hover:from-sky-500/20 hover:to-blue-500/15 transition-colors duration-300\">\r\n                  <span class=\"text-sm font-normal\">{{ mention.keyword_term }}</span>\r\n                </span>\r\n                <template v-if=\"mention.sentiment !== null\">\r\n                  <span\r\n                    class=\"inline-flex items-center space-x-1 w-24 px-2 py-1 rounded-md text-sm font-normal transition-colors duration-300\"\r\n                    :class=\"{\r\n                      'bg-gradient-to-r from-emerald-500/10 to-emerald-500/5 text-emerald-700 hover:from-emerald-500/20 hover:to-emerald-500/15': mention.sentiment === 'positive',\r\n                      'bg-gradient-to-r from-rose-500/10 to-rose-500/5 text-rose-700 hover:from-rose-500/20 hover:to-rose-500/15': mention.sentiment === 'negative',\r\n                      'bg-gradient-to-r from-amber-500/10 to-amber-500/5 text-amber-700 hover:from-amber-500/20 hover:to-amber-500/15': mention.sentiment === 'neutral'\r\n                    }\">\r\n                    <TrendingUp v-if=\"mention.sentiment === 'positive'\" class=\"w-4 h-4 mr-1\" />\r\n                    <TrendingDown v-if=\"mention.sentiment === 'negative'\" class=\"w-4 h-4 mr-1\" />\r\n                    <Minus v-if=\"mention.sentiment === 'neutral'\" class=\"w-4 h-4 mr-1\" />\r\n                    <span class=\"text-sm font-normal\">\r\n                      {{ mention.sentiment.charAt(0).toUpperCase() + mention.sentiment.slice(1) }}\r\n                    </span>\r\n                  </span>\r\n                </template>\r\n                <button v-else @click=\"handleRetrySentiment(mention.id)\" :disabled=\"retryingMentions.has(mention.id)\"\r\n                  class=\"inline-flex items-center justify-center px-3 py-1 rounded-md text-sm font-medium border border-gray-300 bg-white hover:bg-gray-50 text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed\">\r\n                  <RefreshCw v-if=\"retryingMentions.has(mention.id)\" class=\"w-3 h-3 mr-1 animate-spin\" />\r\n                  {{ retryingMentions.has(mention.id) ? 'Analyzing...' : 'Retry' }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n\r\n            <hr class=\"my-4 border-t border-gray-100\" />\r\n\r\n\r\n            <div>\r\n              <h2 class=\"text-lg font-medium text-gray-700 mb-4\"\r\n                v-html=\"processContent(mention.title, mention.keyword_term)\">\r\n              </h2>\r\n              <p class=\"text-gray-600 leading-relaxed mb-4\"\r\n                v-html=\"processContent(mention.content, mention.keyword_term)\"></p>\r\n            </div>\r\n\r\n\r\n            <div class=\"flex justify-end\">\r\n              <a :href=\"mention.url\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n                class=\"inline-flex items-center px-3 py-1 rounded-md text-sm font-normal bg-gradient-to-r from-gray-500/10 to-gray-500/5 text-gray-700 hover:from-gray-500/20 hover:to-gray-500/10 transition-all duration-300\">\r\n                View\r\n                <ExternalLink class=\"w-4 h-4 ml-1\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n      <!-- Pagination -->\r\n      <div class=\"mt-8\">\r\n        <Pagination v-model:currentPage=\"currentPage\" :totalPages=\"totalPages\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"names":["use","CanvasRenderer","LineChart","GridComponent","TooltipComponent","LegendComponent","ToolboxComponent","props","__props","emit","__emit","createSeries","name","data","color","chartOption","computed","series","item","params","result","param","bgColor","mentions","isLoading","error","totalMentions","positiveMentions","negativeMentions","neutralMentions","totalPages","fetchMentions","retrySentiment","graphData","availableKeywords","useMentions","startDateRef","ref","endDateRef","retryingMentions","handleRetrySentiment","mentionId","err","currentPage","selectedSentiment","selectedPlatform","selectedKeyword","searchQuery","sortDirection","visibleLines","initializeDates","today","thirtyDaysAgo","startDate","endDate","resetFilters","onMounted","createFilters","chartTitle","start","end","chartData","point","processContent","content","keyword","escapeHtml","text","stripText","findMatches","strippedKeyword","matches","matchedRanges","i","windowSize","chunk","found","current","beforeChar","afterChar","trimStart","trimEnd","pos","escapedContent","firstMatch","prefix","suffix","lastIndex","match","formatDate","dateString","date","getSourceColor","source","toggleLine","line","toggleSortDirection","debouncedFetch","fn","delay","timeoutId","args","query","filters","watch","newValue","page","newPage"],"mappings":"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"}